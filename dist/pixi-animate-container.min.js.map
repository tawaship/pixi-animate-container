{"version":3,"file":"pixi-animate-container.min.js","sources":["../src/createjs/modules/ButtonHelper.ts","../src/createjs/modules/utils.ts","../src/createjs/modules/core.ts","../src/createjs/modules/Stage.ts","../src/createjs/modules/StageGL.ts","../src/createjs/modules/EventManager.ts","../src/createjs/modules/MovieClip.ts","../src/createjs/modules/Sprite.ts","../src/createjs/modules/Shape.ts","../src/createjs/modules/Bitmap.ts","../src/createjs/modules/Graphics.ts","../src/createjs/modules/Text.ts","../src/createjs/modules/ColorFilter.ts","../src/Container.ts","../src/createjs/core.ts"],"sourcesContent":["import createjs from '@tawaship/createjs-module';\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/ButtonHelper.html | createjs.ButtonHelper]]\r\n */\r\nexport class CreatejsButtonHelper extends createjs.ButtonHelper {\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tconst createjs = args[0];\r\n\t\tconst pixi = createjs.pixi;\r\n\t\t\r\n\t\tconst baseFrame = args[1];\r\n\t\tconst overFrame = args[2];\r\n\t\tconst downFrame = args[3];\r\n\t\tconst hit = arguments[5];\r\n\t\tconst hitFrame = args[6];\r\n\t\t\r\n\t\thit.gotoAndStop(hitFrame);\r\n\t\tconst hitPixi = pixi.addChild(hit.pixi);\r\n\t\thitPixi.alpha = 0.00001;\r\n\t\t\r\n\t\tlet isOver = false;\r\n\t\tlet isDown = false;\r\n\t\t\r\n\t\thitPixi.on('pointerover', function() {\r\n\t\t\tisOver = true;\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerout', function() {\r\n\t\t\tisOver = false;\r\n\t\t\t\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerdown', function() {\r\n\t\t\tisDown = true;\r\n\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerup', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerupoutside', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.interactive = true;\r\n\t\thitPixi.cursor = 'pointer';\r\n\t}\r\n}","export function createObject<T>(proto: object): T {\r\n\treturn Object.create(proto);\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport const DEG_TO_RAD = Math.PI / 180;","import { Container, Point } from 'pixi.js';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsStage } from './Stage';\r\nimport { CreatejsStageGL } from './StageGL';\r\nimport { CreatejsMovieClip, PixiMovieClip } from './MovieClip';\r\nimport { CreatejsSprite } from './Sprite';\r\nimport { CreatejsShape } from './Shape';\r\nimport { CreatejsBitmap } from './Bitmap';\r\nimport { CreatejsGraphics } from './Graphics';\r\nimport { CreatejsText } from './Text';\r\nimport { EventManager, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { DEG_TO_RAD } from './utils';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Point.html | PIXI.Point]]\r\n */\r\ndeclare class PixiPoint {};\r\n\r\nexport { Point as PixiPoint };\r\n\r\nexport interface ITickerData {\r\n\tdelta: number;\r\n}\r\n\r\nexport interface IPixiData<T extends Container> {\r\n\tregObj: Point;\r\n\tinstance: T;\r\n}\r\n\r\nexport function createPixiData<TPixiDisplayObject extends Container>(pixi: TPixiDisplayObject, regObj: Point): IPixiData<TPixiDisplayObject> {\r\n\treturn {\r\n\t\tregObj,\r\n\t\tinstance: pixi\r\n\t};\r\n}\r\n\r\nexport type TCreatejsMask = CreatejsShape | null;\r\n\r\nexport interface ICreatejsParam {\r\n\tx: number;\r\n\ty: number;\r\n\tscaleX: number;\r\n\tscaleY: number;\r\n\tregX: number;\r\n\tregY: number;\r\n\tskewX: number;\r\n\tskewY: number;\r\n\trotation: number;\r\n\tvisible: boolean;\r\n\talpha: number;\r\n\t_off: boolean;\r\n\tmask: TCreatejsMask;\r\n}\r\n\r\nexport type TCreatejsObject =\r\n\tCreatejsStage\r\n\t| CreatejsStageGL\r\n\t| CreatejsMovieClip\r\n\t| CreatejsSprite\r\n\t| CreatejsShape\r\n\t| CreatejsBitmap\r\n\t| CreatejsGraphics\r\n\t| CreatejsText;\r\n\r\nexport function createCreatejsParams(): ICreatejsParam {\r\n\treturn {\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\tscaleX: 0,\r\n\t\tscaleY: 0,\r\n\t\tregX: 0,\r\n\t\tregY: 0,\r\n\t\tskewX: 0,\r\n\t\tskewY: 0,\r\n\t\trotation: 0,\r\n\t\tvisible: true,\r\n\t\talpha: 1,\r\n\t\t_off: false,\r\n\t\tmask: null\r\n\t};\r\n}\r\n\r\nexport type TCreatejsDisplayObject = any/* createjs.DisplayObject */;\r\n\r\nexport interface ICreatejsDisplayObjectUpdater extends TCreatejsDisplayObject {\r\n\tupdateForPixi(e: ITickerData): boolean;\r\n}\r\n\r\nexport interface ICreatejsDisplayObjectInitializer {\r\n\tinitialize(...args: any[]): any;\r\n}\r\n\r\nexport function updateDisplayObjectChildren(cjs: ICreatejsDisplayObjectUpdater, e: ITickerData) {\r\n\tconst list = cjs.children.slice();\r\n\tfor (let i = 0, l = list.length; i < l; i++) {\r\n\t\tconst child = list[i];\r\n\t\tchild.updateForPixi(e);\r\n\t}\r\n\t\r\n\treturn true;\r\n}\r\n\r\nexport interface IMixinedCreatejsDisplayObject extends ICreatejsParam, TCreatejsDisplayObject {\r\n\tpixi: Container;\r\n\taddEventListener(type: string, cb: ICreatejsInteractionEventDelegate | CreatejsButtonHelper, ...args: any[]): any;\r\n\tremoveEventListener(type: string, cb: ICreatejsInteractionEventDelegate, ...args: any[]): any;\r\n\tremoveAllEventListeners(type?: string, ...args: any[]): any;\r\n}\r\n\r\ntype TMixinedCreatejsDisplayObjectClass = abstract new (...args: any[]) => IMixinedCreatejsDisplayObject;\r\n\r\nexport function mixinCreatejsDisplayObject(superClass: new (...args: any[]) => TCreatejsDisplayObject): TMixinedCreatejsDisplayObjectClass {\r\n\tabstract class C extends superClass {\r\n\t\tprotected abstract _pixiData: IPixiData<Container>;\r\n\t\tprotected abstract _createjsParams: ICreatejsParam;\r\n\t\tprotected abstract _createjsEventManager: EventManager;\r\n\t\t\r\n\t\tget pixi() {\r\n\t\t\treturn this._pixiData.instance;\r\n\t\t}\r\n\t\t\r\n\t\tget x() {\r\n\t\t\treturn this._createjsParams.x;\r\n\t\t}\r\n\t\t\r\n\t\tset x(value) {\r\n\t\t\tthis._pixiData.instance.x = value;\r\n\t\t\tthis._createjsParams.x = value;\r\n\t\t}\r\n\t\t\r\n\t\tget y() {\r\n\t\t\treturn this._createjsParams.y;\r\n\t\t}\r\n\t\t\r\n\t\tset y(value) {\r\n\t\t\tthis._pixiData.instance.y = value;\r\n\t\t\tthis._createjsParams.y = value;\r\n\t\t}\r\n\t\t\r\n\t\tget scaleX() {\r\n\t\t\treturn this._createjsParams.scaleX;\r\n\t\t}\r\n\t\t\t\r\n\t\tset scaleX(value) {\r\n\t\t\tthis._pixiData.instance.scale.x = value;\r\n\t\t\tthis._createjsParams.scaleX = value;\r\n\t\t}\r\n\t\t\r\n\t\tget scaleY() {\r\n\t\t\treturn this._createjsParams.scaleY;\r\n\t\t}\r\n\t\t\r\n\t\tset scaleY(value) {\r\n\t\t\tthis._pixiData.instance.scale.y = value;\r\n\t\t\tthis._createjsParams.scaleY = value;\r\n\t\t}\r\n\t\t\r\n\t\tget skewX() {\r\n\t\t\treturn this._createjsParams.skewX;\r\n\t\t}\r\n\t\t\r\n\t\tset skewX(value) {\r\n\t\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n\t\t\tthis._createjsParams.skewX = value;\r\n\t\t}\r\n\t\t\r\n\t\tget skewY() {\r\n\t\t\treturn this._createjsParams.skewY;\r\n\t\t}\r\n\t\t\r\n\t\tset skewY(value) {\r\n\t\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n\t\t\tthis._createjsParams.skewY = value;\r\n\t\t}\r\n\t\t\r\n\t\tget regX() {\r\n\t\t\treturn this._createjsParams.regX;\r\n\t\t}\r\n\t\t\r\n\t\tset regX(value) {\r\n\t\t\tthis._pixiData.regObj.x = value;\r\n\t\t\tthis._createjsParams.regX = value;\r\n\t\t}\r\n\t\t\r\n\t\tget regY() {\r\n\t\t\treturn this._createjsParams.regY;\r\n\t\t}\r\n\t\t\r\n\t\tset regY(value) {\r\n\t\t\tthis._pixiData.regObj.y = value;\r\n\t\t\tthis._createjsParams.regY = value;\r\n\t\t}\r\n\t\t\r\n\t\tget rotation() {\r\n\t\t\treturn this._createjsParams.rotation;\r\n\t\t}\r\n\t\t\r\n\t\tset rotation(value) {\r\n\t\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n\t\t\tthis._createjsParams.rotation = value;\r\n\t\t}\r\n\t\t\r\n\t\tget visible() {\r\n\t\t\treturn this._createjsParams.visible;\r\n\t\t}\r\n\t\t\r\n\t\tset visible(value) {\r\n\t\t\tvalue = !!value;\r\n\t\t\tthis._pixiData.instance.visible = value;\r\n\t\t\tthis._createjsParams.visible = value;\r\n\t\t}\r\n\t\t\r\n\t\tget alpha() {\r\n\t\t\treturn this._createjsParams.alpha;\r\n\t\t}\r\n\t\t\r\n\t\tset alpha(value) {\r\n\t\t\tthis._pixiData.instance.alpha = value;\r\n\t\t\tthis._createjsParams.alpha = value;\r\n\t\t}\r\n\t\t\r\n\t\tget _off() {\r\n\t\t\treturn this._createjsParams._off;\r\n\t\t}\r\n\t\t\r\n\t\tset _off(value) {\r\n\t\t\tthis._pixiData.instance.renderable = !value;\r\n\t\t\tthis._createjsParams._off = value;\r\n\t\t}\r\n\t\t\r\n\t\taddEventListener(type: string, cb: ICreatejsInteractionEventDelegate | CreatejsButtonHelper, ...args: any[]) {\r\n\t\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\t\tthis._createjsEventManager.add(type, cb);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn super.addEventListener(type, cb, ...args);\r\n\t\t}\r\n\t\t\r\n\t\tremoveEventListener(type: string, cb: ICreatejsInteractionEventDelegate, ...args: any[]) {\r\n\t\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\t\tthis._createjsEventManager.remove(type, cb);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn super.removeEventListener(type, cb, ...args);\r\n\t\t}\r\n\t\t\r\n\t\tremoveAllEventListeners(type?: string, ...args: any[]) {\r\n\t\t\tthis._createjsEventManager.removeAll(type);\r\n\t\t\t\r\n\t\t\treturn super.removeAllEventListeners(type, ...args);\r\n\t\t}\r\n\t\t\r\n\t\tget mask() {\r\n\t\t\treturn this._createjsParams.mask;\r\n\t\t}\r\n\t\t\r\n\t\tset mask(value: TCreatejsMask) {\r\n\t\t\tif (value) {\r\n\t\t\t\tvalue.masked.push(this._pixiData.instance);\r\n\t\t\t\tthis._pixiData.instance.mask = value.pixi;\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.once('added', () => {\r\n\t\t\t\t\tthis._pixiData.instance.parent.addChild(value.pixi);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._createjsParams.mask = value;\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn C;\r\n}","import createjs from '@tawaship/createjs-module';\r\nimport { updateDisplayObjectChildren, ITickerData, ICreatejsDisplayObjectUpdater } from './core';\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Stage.html | createjs.Stage]]\r\n */\r\nexport class CreatejsStage extends createjs.Stage implements ICreatejsDisplayObjectUpdater {\r\n\tupdateForPixi(props: ITickerData) {\r\n\t\tif (this.tickOnUpdate) { this.tick(props); }\r\n\t\tthis.dispatchEvent(\"drawstart\");\r\n\t\tupdateDisplayObjectChildren(this, props);\r\n\t\tthis.dispatchEvent(\"drawend\");\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n}","import createjs from '@tawaship/createjs-module';\r\nimport { updateDisplayObjectChildren, ITickerData, ICreatejsDisplayObjectUpdater } from './core';\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/StageGL.html | createjs.StageGL]]\r\n */\r\nexport class CreatejsStageGL extends createjs.StageGL implements ICreatejsDisplayObjectUpdater {\r\n\tupdateForPixi(props: ITickerData) {\r\n\t\tif (this.tickOnUpdate) { this.tick(props); }\r\n\t\tthis.dispatchEvent(\"drawstart\");\r\n\t\tupdateDisplayObjectChildren(this, props);\r\n\t\tthis.dispatchEvent(\"drawend\");\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n}","import { TCreatejsObject, ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer } from './core';\r\nimport { DisplayObject, utils } from 'pixi.js';\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst createjsInteractionEvents = {\r\n\tmousedown: true,\r\n\tpressmove: true,\r\n\tpressup: true,\r\n\trollover: true,\r\n\trollout: true,\r\n\tclick: true\r\n};\r\n\r\nexport interface ICreatejsInteractionEventDelegate {\r\n\t (e: any): void;\r\n}\r\n\r\nexport class EventManager {\r\n\tprivate _isDown: boolean = false;\r\n\tprivate _emitter: utils.EventEmitter;\r\n\tprivate _cjs: TCreatejsObject;\r\n\t\r\n\tconstructor(cjs: TCreatejsObject) {\r\n\t\tthis._cjs = cjs;\r\n\t\tthis._emitter = new utils.EventEmitter();\r\n\t\t\r\n\t\tconst pixi = cjs.pixi;\r\n\t\t\r\n\t\tpixi\r\n\t\t.on('pointerdown', this._onPointerDown, this)\r\n\t\t.on('pointermove', this._onPointerMove, this)\r\n\t\t.on('pointerup', this._onPointerUp, this)\r\n\t\t.on('pointerupoutside', this._onPointerUpOutside, this)\r\n\t\t.on('pointertap', this._onPointerTap, this)\r\n\t\t.on('pointerover', this._onPointerOver, this)\r\n\t\t.on('pointerout', this._onPointerOut, this);\r\n\t}\r\n\t\r\n\tprivate _onPointerDown(e: any) {\r\n\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\r\n\t\te.target = e.target.createjs;\r\n\t\tconst ev = e.data;\r\n\t\te.rawX = ev.global.x;\r\n\t\te.rawY = ev.global.y;\r\n\t\t\r\n\t\tthis._isDown = true;\r\n\t\t\r\n\t\tthis._emitter.emit('mousedown', e);\r\n\t}\r\n\t\r\n\tprivate _onPointerMove(e: any) {\r\n\t\tif (!this._isDown) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\te.currentTarget = this._cjs;\r\n\t\t\r\n\t\te.target = e.target && e.target.createjs;\r\n\t\tconst ev = e.data;\r\n\t\te.rawX = ev.global.x;\r\n\t\te.rawY = ev.global.y;\r\n\t\t\r\n\t\tthis._emitter.emit('pressmove', e);\r\n\t}\r\n\t\r\n\tprivate _onPointerUp(e: any) {\r\n\t\te.currentTarget = this._cjs;\r\n\t\t\r\n\t\te.target = e.target && e.target.createjs;\r\n\t\tconst ev = e.data;\r\n\t\te.rawX = ev.global.x;\r\n\t\te.rawY = ev.global.y;\r\n\t\t\r\n\t\tthis._isDown = false;\r\n\t\t\r\n\t\tthis._emitter.emit('pressup', e);\r\n\t}\r\n\t\r\n\tprivate _onPointerUpOutside(e: any) {\r\n\t\te.currentTarget = this._cjs;\r\n\t\t\r\n\t\te.target = e.target && e.target.createjs;\r\n\t\tconst ev = e.data;\r\n\t\te.rawX = ev.global.x;\r\n\t\te.rawY = ev.global.y;\r\n\t\t\r\n\t\tthis._isDown = false;\r\n\t\t\r\n\t\tthis._emitter.emit('pressup', e);\r\n\t}\r\n\t\r\n\tprivate _onPointerTap(e: any) {\r\n\t\te.currentTarget = this._cjs;\r\n\t\t\r\n\t\te.target = e.target && e.target.createjs;\r\n\t\tconst ev = e.data;\r\n\t\te.rawX = ev.global.x;\r\n\t\te.rawY = ev.global.y;\r\n\t\t\r\n\t\tthis._emitter.emit('click', e);\r\n\t}\r\n\t\r\n\tprivate _onPointerOver(e: any) {\r\n\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\r\n\t\te.target = e.currentTarget.createjs;\r\n\t\tconst ev = e.data;\r\n\t\te.rawX = ev.global.x;\r\n\t\te.rawY = ev.global.y;\r\n\t\t\r\n\t\tthis._emitter.emit('rollover', e);\r\n\t}\r\n\t\r\n\tprivate _onPointerOut(e: any) {\r\n\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\r\n\t\te.target = e.currentTarget.createjs;\r\n\t\tconst ev = e.data;\r\n\t\te.rawX = ev.global.x;\r\n\t\te.rawY = ev.global.y;\r\n\t\t\r\n\t\tthis._emitter.emit('rollout', e);\r\n\t}\r\n\t\r\n\tadd(type: string, cb: ICreatejsInteractionEventDelegate) {\r\n\t\tif (!(type in createjsInteractionEvents)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._emitter.off(type, cb);\r\n\t\tthis._emitter.on(type, cb);\r\n\t\t\r\n\t\tif (this._emitter.eventNames().length > 0) {\r\n\t\t\tthis._cjs.pixi.interactive = true;\r\n\t\t}\r\n\t}\r\n\t\r\n\tremove(type: string, cb: ICreatejsInteractionEventDelegate) {\r\n\t\tif (!(type in createjsInteractionEvents)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._emitter.off(type, cb);\r\n\t\t\r\n\t\tif (this._emitter.eventNames().length === 0) {\r\n\t\t\tthis._cjs.pixi.interactive = false;\r\n\t\t}\r\n\t}\r\n\t\r\n\tremoveAll(type?: string) {\r\n\t\tif (type && !(type in createjsInteractionEvents)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._emitter.removeAllListeners(type);\r\n\t\t\r\n\t\tif (this._emitter.eventNames().length === 0) {\r\n\t\t\tthis._cjs.pixi.interactive = false;\r\n\t\t}\r\n\t}\r\n}","import { Container } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { CreatejsColorFilter, PixiColorMatrixFilter } from './ColorFilter';\r\nimport { mixinCreatejsDisplayObject, createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, updateDisplayObjectChildren, ITickerData, ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer } from './core';\r\nimport { createObject } from './utils';\r\nimport { EventManager } from './EventManager';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nexport class PixiMovieClip extends Container {\r\n\tprivate _createjs: CreatejsMovieClip;\r\n\tprivate _filterContainer: Container | null = null;\r\n\t\r\n\tconstructor(cjs: CreatejsMovieClip) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget filterContainer() {\r\n\t\treturn this._filterContainer;\r\n\t}\r\n\t\r\n\tset filterContainer(value) {\r\n\t\tthis._filterContainer = value;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport type TCreatejsColorFilters = CreatejsColorFilter[] | null;\r\n\r\nexport interface ICreatejsMovieClipParam extends ICreatejsParam {\r\n\tfilters: TCreatejsColorFilters;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsMovieClipParams(): ICreatejsMovieClipParam {\r\n\treturn Object.assign(createCreatejsParams(), {\r\n\t\tfilters: null\r\n\t});\r\n}\r\n\r\nexport interface IPixiMovieClipData extends IPixiData<PixiMovieClip> {\r\n\tsubInstance: Container;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiMovieClipData(cjs: CreatejsMovieClip): IPixiMovieClipData {\r\n\tconst pixi = new PixiMovieClip(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData<PixiMovieClip>(pixi, pixi.pivot), {\r\n\t\tsubInstance: pixi\r\n\t});\r\n}\r\n\r\nexport const b = 1;\r\n\r\nexport class AnimateEvent extends createjs.Event {\r\n\tconstructor(type: string) {\r\n\t\tsuper(type);\r\n\t}\r\n};\r\n\r\nexport interface IReachLabelData {\r\n\t/**\r\n\t * Label name.\r\n\t */\r\n\tlabel: string;\r\n\t\r\n\t/**\r\n\t * Frame number of label.\r\n\t */\r\n\tposition: number;\r\n}\r\n\r\nexport class ReachLabelEvent extends AnimateEvent {\r\n\tdata: IReachLabelData;\r\n\t\r\n\tconstructor(type: string, label: IReachLabelData) {\r\n\t\tsuper(type);\r\n\t\t\r\n\t\tthis.data = label;\r\n\t}\r\n}\r\n\r\nexport interface IFrameEventOption {\r\n\tendAnimation?: boolean;\r\n\treachLabel?: boolean;\r\n}\r\n\r\nconst P = createjs.MovieClip;\r\n\r\nconst T: number = 1000 / 60;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/MovieClip.html | createjs.MovieClip]]\r\n */\r\nexport class CreatejsMovieClip extends mixinCreatejsDisplayObject(createjs.MovieClip) implements ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer {\r\n\tprotected _pixiData: IPixiMovieClipData;\r\n\tprotected _createjsParams: ICreatejsMovieClipParam;\r\n\tprotected _createjsEventManager: EventManager;\r\n\r\n\tdeclare protected _framerateBase: number;\r\n\tdeclare protected _useFrameEvent: IFrameEventOption;\r\n\r\n\t/**\r\n\t * When the last frame of the timeline is reached.\r\n\t * \r\n\t * @event\r\n\t */\r\n\tendAnimation?(e: AnimateEvent): void {}\r\n\t\r\n\t/**\r\n\t * When either labels is reached.\r\n\t * \r\n\t * @event\r\n\t */\r\n\treachLabel?(e: ReachLabelEvent): void {}\r\n\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._pixiData = createPixiMovieClipData(this);\r\n\t\tthis._createjsParams = createCreatejsMovieClipParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\tP.apply(this, args);\r\n\t\tthis.framerate = this._framerateBase;\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiMovieClipData(this);\r\n\t\tthis._createjsParams = createCreatejsMovieClipParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\tsuper.initialize(...args);\r\n\t\tthis.framerate = this._framerateBase;\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData): boolean {\r\n\t\tconst currentFrame = this.currentFrame;\r\n\t\t\r\n\t\tthis.advance(T * e.delta);\r\n\t\t\r\n\t\tif (currentFrame !== this.currentFrame) {\r\n\t\t\tif (this._useFrameEvent.endAnimation && this.currentFrame === (this.totalFrames - 1)) {\r\n\t\t\t\tthis.dispatchEvent(new AnimateEvent('endAnimation'));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this._useFrameEvent.reachLabel) {\r\n\t\t\t\tfor (let i = 0; i < this.labels.length; i++) {\r\n\t\t\t\t\tconst label = this.labels[i];\r\n\t\t\t\t\tif (this.currentFrame === label.position) {\r\n\t\t\t\t\t\tthis.dispatchEvent(new ReachLabelEvent('reachLabel', label));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._updateState();\r\n\t\t\r\n\t\treturn updateDisplayObjectChildren(this, e);\r\n\t}\r\n\t\r\n\tget filters() {\r\n\t\treturn this._createjsParams.filters;\r\n\t}\r\n\t\r\n\t//*\r\n\tset filters(value: TCreatejsColorFilters) {\r\n\t\tconst list: PixiColorMatrixFilter[] = [];\r\n\r\n\t\tif (value && value.length > 0) {\r\n\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\tlet f = value[i];\r\n\t\t\t\t\r\n\t\t\t\tif (!(f instanceof createjs.ColorFilter)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlist.push(f.pixi);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._pixiData.instance.filters = list;\r\n\t\tthis._createjsParams.filters = value;\r\n\t}\r\n\t//*/\r\n\t/*\r\n\tset filters(value: TCreatejsColorFilters) {\r\n\t\tif (value) {\r\n\t\t\tconst list = [];\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\tconst f = value[i];\r\n\t\t\t\t\r\n\t\t\t\tif (f instanceof createjs.ColorMatrixFilter) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst m = new filters.ColorMatrixFilter();\r\n\t\t\t\tm.matrix = [\r\n\t\t\t\t\tf.redMultiplier, 0, 0, 0, f.redOffset / 255,\r\n\t\t\t\t\t0, f.greenMultiplier, 0, 0, f.greenOffset / 255,\r\n\t\t\t\t\t0, 0, f.blueMultiplier, 0, f.blueOffset / 255,\r\n\t\t\t\t\t0, 0, 0, f.alphaMultiplier, f.alphaOffset / 255,\r\n\t\t\t\t\t0, 0, 0, 0, 1\r\n\t\t\t\t];\r\n\t\t\t\tlist.push(m);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\tlet f = value[i];\r\n\t\t\t\t\r\n\t\t\t\tif (!(f instanceof createjs.ColorFilter)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlist.push(f.pixi);\r\n\t\t\t}\r\n\r\n\t\t\tvar o = this._pixiData.instance;\r\n\t\t\tvar c = o.children;\r\n\t\t\tvar n = new Container();\r\n\t\t\tvar nc = this._pixiData.subInstance = n.addChild(new Container());\r\n\t\t\t\r\n\t\t\twhile (c.length) {\r\n\t\t\t\tnc.addChild(c[0]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\to.addChild(n);\r\n\t\t\to.filterContainer = nc;\r\n\t\t\t\r\n\t\t\tnc.updateTransform();\r\n\t\t\tnc.calculateBounds();\r\n\t\t\t\r\n\t\t\tconst b = nc.getLocalBounds();\r\n\t\t\tconst x = b.x;\r\n\t\t\tconst y = b.y;\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < nc.children.length; i++) {\r\n\t\t\t\tconst child = nc.children[i];\r\n\t\t\t\t\r\n\t\t\t\tchild.x -= x;\r\n\t\t\t\tchild.y -= y;\r\n\t\t\t\t\r\n\t\t\t\tif (child instanceof PixiMovieClip) {\r\n\t\t\t\t\tconst fc = child.filterContainer;\r\n\t\t\t\t\tif (fc) {\r\n\t\t\t\t\t\t//fc.cacheAsBitmap = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tn.x = x;\r\n\t\t\tn.y = y;\r\n\t\t\t\r\n\t\t\tnc.filters = list;\r\n\t\t\t//nc.cacheAsBitmap = true;\r\n\t\t} else {\r\n\t\t\tconst o = this._pixiData.instance;\r\n\t\t\t\r\n\t\t\tif (o.filterContainer) {\r\n\t\t\t\tconst nc = this._pixiData.subInstance;\r\n\t\t\t\tconst n = nc.parent;\r\n\t\t\t\tconst c = nc.children;\r\n\t\t\t\t\r\n\t\t\t\to.removeChildren();\r\n\t\t\t\to.filterContainer = null;\r\n\t\t\t\twhile (c.length) {\r\n\t\t\t\t\tconst v = o.addChild(c[0]);\r\n\t\t\t\t\tv.x += n.x;\r\n\t\t\t\t\tv.y += n.y;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tnc.filters = [];\r\n\t\t\t\t//nc.cacheAsBitmap = false;\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.subInstance = o;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis._createjsParams.filters = value;\r\n\t}\r\n\t//*/\r\n\t\r\n\taddChild(child: ICreatejsDisplayObjectUpdater) {\r\n\t\tthis._pixiData.subInstance.addChild(child.pixi);\r\n\t\t\r\n\t\treturn super.addChild(child);\r\n\t}\r\n\t\r\n\taddChildAt(child: ICreatejsDisplayObjectUpdater, index: number) {\r\n\t\tthis._pixiData.subInstance.addChildAt(child.pixi, index);\r\n\t\t\r\n\t\treturn super.addChildAt(child, index);\r\n\t}\r\n\t\r\n\tremoveChild(child: ICreatejsDisplayObjectUpdater) {\r\n\t\tthis._pixiData.subInstance.removeChild(child.pixi);\r\n\t\t\r\n\t\treturn super.removeChild(child);\r\n\t}\r\n\t\r\n\tremoveChildAt(index: number) {\r\n\t\tthis._pixiData.subInstance.removeChildAt(index);\r\n\t\t\r\n\t\treturn super.removeChildAt(index);\r\n\t}\r\n\t\r\n\tremoveAllChldren() {\r\n\t\tthis._pixiData.subInstance.removeChildren();\r\n\t\t\r\n\t\treturn super.removeAllChldren();\r\n\t}\r\n}\r\n\r\ndelete(CreatejsMovieClip.prototype.endAnimation);\r\ndelete(CreatejsMovieClip.prototype.reachLabel);\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsMovieClip.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsMovieClipParams(),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiMovieClipData(createObject<CreatejsMovieClip>(CreatejsMovieClip.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});\r\n\r\n","import { Sprite, Texture, BaseTexture } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { mixinCreatejsDisplayObject, createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, ITickerData, TCreatejsMask, ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer } from './core';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsShape } from './Shape';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Sprite.html | PIXI.Sprite]]\r\n */\r\nexport class PixiSprite extends Sprite {\r\n\tprivate _createjs: CreatejsSprite | {};\r\n\t\r\n\tconstructor(cjs: CreatejsSprite | {}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface ICreatejsSpriteParam extends ICreatejsParam {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsSpriteParams(): ICreatejsSpriteParam {\r\n\treturn createCreatejsParams();\r\n}\r\n\r\nexport interface IPixiSpriteData extends IPixiData<PixiSprite> {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiSpriteData(cjs: CreatejsSprite | {}): IPixiSpriteData {\r\n\tconst pixi = new PixiSprite(cjs);\r\n\t\r\n\treturn createPixiData<PixiSprite>(pixi, pixi.anchor)\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Sprite;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Sprite.html | createjs.Sprite]]\r\n */\r\nexport class CreatejsSprite extends mixinCreatejsDisplayObject(createjs.Sprite) implements ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer {\r\n\tprotected _pixiData: IPixiSpriteData;\r\n\tprotected _createjsParams: ICreatejsSpriteParam;\r\n\tprotected _createjsEventManager: EventManager;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._pixiData = createPixiSpriteData(this);\r\n\t\tthis._createjsParams = createCreatejsSpriteParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.apply(this, args);\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiSpriteData(this);\r\n\t\tthis._createjsParams = createCreatejsSpriteParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\treturn super.initialize(...args);\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tgotoAndStop(...args: any[]) {\r\n\t\tsuper.gotoAndStop(...args);\r\n\t\t\r\n\t\tconst frame = this.spriteSheet.getFrame(this.currentFrame);\r\n\t\tconst baseTexture = BaseTexture.from(frame.image);\r\n\t\tconst texture = new Texture(baseTexture, frame.rect);\r\n\t\t\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsSprite.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsSpriteParams(),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiSpriteData(createObject<CreatejsSprite>(CreatejsSprite.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});","import { DisplayObject, Container } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { mixinCreatejsDisplayObject, createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, ITickerData, TCreatejsMask, ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer } from './core';\r\nimport { CreatejsGraphics } from './Graphics';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nexport class PixiShape extends Container {\r\n\tprivate _createjs: CreatejsShape;\r\n\t\r\n\tconstructor(cjs: CreatejsShape) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface ICreatejsShapeParam extends ICreatejsParam {\r\n\tgraphics: CreatejsGraphics | null;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsShapeParams(graphics: CreatejsGraphics | null): ICreatejsShapeParam {\r\n\treturn Object.assign(createCreatejsParams(), {\r\n\t\tgraphics\r\n\t});\r\n}\r\n\r\nexport interface IPixiShapeData extends IPixiData<PixiShape> {\r\n\t/**\r\n\t * [[http://pixijs.download/release/docs/PIXI.DisplayObject.html | PIXI.DisplayObject]]\r\n\t */\r\n\tmasked: DisplayObject[];\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiShapeData(cjs: CreatejsShape): IPixiShapeData {\r\n\tconst pixi = new PixiShape(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData<PixiShape>(pixi, pixi.pivot), {\r\n\t\tmasked: []\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Shape;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Shape.html | createjs.Shape]]\r\n */\r\nexport class CreatejsShape extends mixinCreatejsDisplayObject(createjs.Shape) implements ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer {\r\n\tprotected _pixiData: IPixiShapeData;\r\n\tprotected _createjsParams: ICreatejsShapeParam;\r\n\tprotected _createjsEventManager: EventManager;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._pixiData = createPixiShapeData(this);\r\n\t\tthis._createjsParams = createCreatejsShapeParams(null);\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.apply(this, args);\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiShapeData(this);\r\n\t\tthis._createjsParams = createCreatejsShapeParams(null);\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\treturn super.initialize(...args);\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tget graphics() {\r\n\t\treturn this._createjsParams.graphics;\r\n\t}\r\n\t\r\n\tset graphics(value) {\r\n\t\tif (this._pixiData.masked.length) {\r\n\t\t\tthis._pixiData.instance.removeChildren();\r\n\t\t\t\r\n\t\t\tif (value) {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = this._pixiData.instance;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (value) {\r\n\t\t\tthis._pixiData.instance.addChild(value.pixi);\r\n\t\t}\r\n\t\t\r\n\t\tthis._createjsParams.graphics = value;\r\n\t}\r\n\t\r\n\tget masked() {\r\n\t\treturn this._pixiData.masked;\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsShape.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsShapeParams(null),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiShapeData(createObject<CreatejsShape>(CreatejsShape.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});","import { Sprite, Texture } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { mixinCreatejsDisplayObject, createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, ITickerData, TCreatejsMask, ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer } from './core';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsShape } from './Shape';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Sprite.html | PIXI.Sprite]]\r\n */\r\nexport class PixiBitmap extends Sprite {\r\n\tprivate _createjs: CreatejsBitmap;\r\n\t\r\n\tconstructor(cjs: CreatejsBitmap) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface ICreatejsBitmapParam extends ICreatejsParam {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsBitmapParams(): ICreatejsBitmapParam {\r\n\treturn createCreatejsParams();\r\n}\r\n\r\nexport interface IPixiBitmapData extends IPixiData<PixiBitmap> {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiBitmapData(cjs: CreatejsBitmap): IPixiBitmapData {\r\n\tconst pixi = new PixiBitmap(cjs);\r\n\t\r\n\treturn createPixiData<PixiBitmap>(pixi, pixi.anchor);\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Bitmap;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Bitmap.html | createjs.Bitmap]]\r\n */\r\nexport class CreatejsBitmap extends mixinCreatejsDisplayObject(createjs.Bitmap) implements ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer {\r\n\tprotected _pixiData: IPixiBitmapData;\r\n\tprotected _createjsParams: ICreatejsBitmapParam;\r\n\tprotected _createjsEventManager: EventManager;\r\n\t \r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._pixiData = createPixiBitmapData(this);\r\n\t\tthis._createjsParams = createCreatejsBitmapParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.apply(this, args);\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiBitmapData(this);\r\n\t\tthis._createjsParams = createCreatejsBitmapParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tconst res = super.initialize(...args);\r\n\t\tconst texture = Texture.from(this.image);\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t\t\r\n\t\treturn res;\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsBitmap.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsBitmapParams(),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiBitmapData(createObject<CreatejsBitmap>(CreatejsBitmap.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});\r\n","import { Graphics, LINE_CAP, LINE_JOIN} from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { mixinCreatejsDisplayObject, createPixiData, createCreatejsParams, IPixiData, ICreatejsParam,  ITickerData, TCreatejsMask, ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer } from './core';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsShape } from './Shape';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Graphics.html | PIXI.Graphics]]\r\n */\r\nexport class PixiGraphics extends Graphics {\r\n\tprivate _createjs: CreatejsGraphics;\r\n\t\r\n\tconstructor(cjs: CreatejsGraphics) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface ICreatejsGraphicsParam extends ICreatejsParam {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsGraphicsParams(): ICreatejsGraphicsParam {\r\n\treturn createCreatejsParams();\r\n}\r\n\r\nexport interface IPixiGraphicsData extends IPixiData<PixiGraphics> {\r\n\tstrokeFill: number;\r\n\tstrokeAlpha: number;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiGraphicsData(cjs: CreatejsGraphics): IPixiGraphicsData {\r\n\tconst pixi = new PixiGraphics(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData<PixiGraphics>(pixi, pixi.pivot), {\r\n\t\tstrokeFill: 0,\r\n\t\tstrokeAlpha: 1\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_RED = 16 * 16 * 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_GREEN = 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineCap = {\r\n\t0: LINE_CAP.BUTT,\r\n\t1: LINE_CAP.ROUND,\r\n\t2: LINE_CAP.SQUARE\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineJoin = {\r\n\t0: LINE_JOIN.MITER,\r\n\t1: LINE_JOIN.ROUND,\r\n\t2: LINE_JOIN.BEVEL\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Graphics;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Graphics.html | createjs.Graphics]]\r\n */\r\nexport class CreatejsGraphics extends mixinCreatejsDisplayObject(createjs.Graphics) implements ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer {\r\n\tprotected _pixiData: IPixiGraphicsData;\r\n\tprotected _createjsParams: ICreatejsGraphicsParam;\r\n\tprotected _createjsEventManager: EventManager;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._pixiData = createPixiGraphicsData(this);\r\n\t\tthis._createjsParams = createCreatejsGraphicsParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.apply(this, args);\r\n\t\t\r\n\t\tthis._pixiData.instance.beginFill(0xFFEEEE, 1);\r\n\t\tthis._pixiData.strokeFill = 0;\r\n\t\tthis._pixiData.strokeAlpha = 1;\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiGraphicsData(this);\r\n\t\tthis._createjsParams = createCreatejsGraphicsParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\treturn super.initialize(...args);\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\t// path methods\r\n\t\r\n\tmoveTo(x: number, y: number) {\r\n\t\tif (this._pixiData.instance.clone().endFill().containsPoint({x: x, y: y})) {\r\n\t\t\tthis._pixiData.instance.beginHole();\r\n\t\t} else {\r\n\t\t\tthis._pixiData.instance.endHole();\r\n\t\t}\r\n\t\t\r\n\t\tthis._pixiData.instance.moveTo(x, y);\r\n\t\t\r\n\t\treturn super.moveTo(x, y);\r\n\t}\r\n\t\r\n\tmt(x: number, y: number) {\r\n\t\treturn this.moveTo(x, y);\r\n\t}\r\n\t\r\n\tlineTo(x: number, y: number) {\r\n\t\tthis._pixiData.instance.lineTo(x, y);\r\n\t\t\r\n\t\treturn super.lineTo(x, y);\r\n\t}\r\n\t\r\n\tlt(x: number, y: number) {\r\n\t\treturn this.lineTo(x, y);\r\n\t}\r\n\t\r\n\tarcTo(x1: number, y1: number, x2: number, y2: number, radius: number) {\r\n\t\tthis._pixiData.instance.arcTo(x1, y1, x2, y2, radius);\r\n\t\t\r\n\t\treturn super.arcTo(x1, y1, x2, y2, radius);\r\n\t}\r\n\t\r\n\tat(x1: number, y1: number, x2: number, y2: number, radius: number) {\r\n\t\treturn this.arcTo(x1, y1, x2, y2, radius);\r\n\t}\r\n\t\r\n\tarc(x: number, y: number, radius: number, startAngle: number, endAngle: number, anticlockwise: boolean) {\r\n\t\tthis._pixiData.instance.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t\t\r\n\t\treturn super.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t}\r\n\t\r\n\ta(x: number, y: number, radius: number, startAngle: number, endAngle: number, anticlockwise: boolean) {\r\n\t\treturn this.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t}\r\n\t\r\n\tquadraticCurveTo(cpx: number, cpy: number, x: number, y: number) {\r\n\t\tthis._pixiData.instance.quadraticCurveTo(cpx, cpy, x, y);\r\n\t\t\r\n\t\treturn super.quadraticCurveTo(cpx, cpy, x, y);\r\n\t}\r\n\t\r\n\tqt(cpx: number, cpy: number, x: number, y: number) {\r\n\t\treturn this.quadraticCurveTo(cpx, cpy, x, y);\r\n\t}\r\n\t\r\n\tcurveTo(cpx: number, cpy: number, x: number, y: number) {\r\n\t\treturn this.quadraticCurveTo(cpx, cpy, x, y);\r\n\t}\r\n\t\r\n\tbezierCurveTo(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number) {\r\n\t\tthis._pixiData.instance.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t\t\r\n\t\treturn super.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t}\r\n\t\r\n\tbt(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number) {\r\n\t\treturn this.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t}\r\n\t\r\n\trect(x: number, y: number, w: number, h: number) {\r\n\t\tthis._pixiData.instance.drawRect(x, y, w, h);\r\n\t\t\r\n\t\treturn super.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tr(x: number, y: number, w: number, h: number) {\r\n\t\treturn this.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tdrawRect(x: number, y: number, w: number, h: number) {\r\n\t\treturn this.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tdr(x: number, y: number, w: number, h: number) {\r\n\t\treturn this.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tclosePath() {\r\n\t\tthis._pixiData.instance.closePath();\r\n\t\t\r\n\t\treturn super.closePath();\r\n\t}\r\n\t\r\n\tcp() {\r\n\t\treturn this.closePath();\r\n\t}\r\n\t\r\n\tclear() {\r\n\t\tthis._pixiData.instance.clear();\r\n\t\t\r\n\t\treturn super.clear();\r\n\t}\r\n\t\r\n\tc() {\r\n\t\treturn this.clear();\r\n\t}\r\n\t\r\n\tprivate _parseColor(color: string) {\r\n\t\tconst res = {\r\n\t\t\tcolor: 0,\r\n\t\t\talpha: 1\r\n\t\t};\r\n\t\t\r\n\t\tif (!color) {\r\n\t\t\tres.alpha = 0;\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tif (color.charAt(0) === '#') {\r\n\t\t\tres.color = parseInt(color.slice(1), 16);\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tconst colors = color.replace(/rgba|\\(|\\)|\\s/g, '').split(',');\r\n\t\t\r\n\t\tres.color = Number(colors[0]) * COLOR_RED + Number(colors[1]) * COLOR_GREEN + Number(colors[2]);\r\n\t\tres.alpha = Number(colors[3]);\r\n\t\t\r\n\t\treturn res;\r\n\t}\r\n\t\r\n\tbeginFill(color: string) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.instance.beginFill(c.color, c.alpha);\r\n\t\t\r\n\t\treturn super.beginFill(color);\r\n\t}\r\n\t\r\n\tf(color: string) {\r\n\t\treturn this.beginFill(color);\r\n\t}\r\n\t\r\n\tendFill() {\r\n\t\tthis._pixiData.instance.endFill();\r\n\t\t\r\n\t\treturn super.endFill();\r\n\t}\r\n\t\r\n\tef() {\r\n\t\treturn this.endFill();\r\n\t}\r\n\t\r\n\tsetStrokeStyle(thickness: number, caps: 0 | 1 | 2, joints: 0 | 1 | 2, miterLimit: number, ignoreScale: boolean) {\r\n\t\tthis._pixiData.instance.lineTextureStyle({\r\n\t\t\twidth: thickness,\r\n\t\t\tcolor: this._pixiData.strokeFill,\r\n\t\t\talpha: this._pixiData.strokeAlpha,\r\n\t\t\tcap: (caps in LineCap) ? LineCap[caps] : LineCap[0],\r\n\t\t\tjoin: (joints in LineJoin) ? LineJoin[joints] : LineJoin[0],\r\n\t\t\tmiterLimit\r\n\t\t});\r\n\t\t\r\n\t\treturn super.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n\t}\r\n\t\r\n\tss(thickness: number, caps: 0 | 1 | 2, joints: 0 | 1 | 2, miterLimit: number, ignoreScale: boolean) {\r\n\t\treturn this.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n\t}\r\n\t\r\n\tbeginStroke(color: string) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.strokeFill = c.color;\r\n\t\tthis._pixiData.strokeAlpha = c.alpha;\r\n\t\t\r\n\t\treturn super.beginStroke(color);\r\n\t}\r\n\t\r\n\ts(color: string) {\r\n\t\treturn this.beginStroke(color);\r\n\t}\r\n\t\r\n\tdrawRoundRect(x: number, y: number, w: number, h: number, radius: number) {\r\n\t\tthis._pixiData.instance.drawRoundedRect(x, y, w, h, radius);\r\n\t\t\r\n\t\treturn super.drawRoundRect(x, y, w, h, radius);\r\n\t}\r\n\t\r\n\trr(x: number, y: number, w: number, h: number, radius: number) {\r\n\t\treturn this.drawRoundRect(x, y, w, h, radius);\r\n\t}\r\n\t\r\n\tdrawCircle(x: number, y: number, radius: number) {\r\n\t\tthis._pixiData.instance.drawCircle(x, y, radius);\r\n\t\t\r\n\t\treturn super.drawCircle(x, y, radius);\r\n\t}\r\n\t\r\n\tdc(x: number, y: number, radius: number) {\r\n\t\treturn this.drawCircle(x, y, radius);\r\n\t}\r\n\t\r\n\tdrawEllipse(x: number, y: number, w: number, h: number) {\r\n\t\tthis._pixiData.instance.drawEllipse(x, y, w, h);\r\n\t\t\r\n\t\treturn super.drawEllipse(x, y, w, h);\r\n\t}\r\n\t\r\n\tde(x: number, y: number, w: number, h: number) {\r\n\t\treturn this.drawEllipse(x, y, w, h);\r\n\t}\r\n\t\r\n\tdrawPolyStar(x: number, y: number, radius: number, sides: number, pointSize: number, angle: number) {\r\n\t\tthis._pixiData.instance.drawRegularPolygon(x, y, radius, sides, angle * DEG_TO_RAD);\r\n\t\t\r\n\t\treturn super.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n\t}\r\n\t\r\n\tdp(x: number, y: number, radius: number, sides: number, pointSize: number, angle: number) {\r\n\t\treturn this.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsGraphics.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsGraphicsParams(),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiGraphicsData(createObject<CreatejsGraphics>(CreatejsGraphics.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});","import { Container, Text } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { mixinCreatejsDisplayObject, createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, ITickerData, TCreatejsMask, ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer } from './core';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsShape } from './Shape';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Text.html | PIXI.Text]]\r\n */\r\nexport class PixiText extends Text {}\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nexport class PixiTextContainer extends Container {\r\n\tprivate _createjs: CreatejsText;\r\n\tprivate _text: PixiText;\r\n\t\r\n\tconstructor(cjs: CreatejsText, text: PixiText) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t\tthis._text = text;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n\t\r\n\tget text() {\r\n\t\treturn this._text;\r\n\t}\r\n}\r\n\r\nexport type TTextAlign = 'left' | 'center' | 'right';\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst DEF_ALIGN: TTextAlign = 'left';\r\n\r\nexport interface ICreatejsTextParam extends ICreatejsParam {\r\n\ttext: string;\r\n\tfont: string;\r\n\tcolor: string;\r\n\ttextAlign: TTextAlign;\r\n\tlineHeight: number;\r\n\tlineWidth: number;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsTextParams(text: string, font: string, color: string): ICreatejsTextParam {\r\n\treturn Object.assign(createCreatejsParams(), {\r\n\t\ttext: text,\r\n\t\tfont: font,\r\n\t\tcolor: color,\r\n\t\ttextAlign: DEF_ALIGN,\r\n\t\tlineHeight: 0,\r\n\t\tlineWidth: 0\r\n\t});\r\n}\r\n\r\nexport interface IPixiTextData extends IPixiData<PixiTextContainer> {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiTextData(cjs: CreatejsText, text: PixiText): IPixiTextData {\r\n\tconst pixi = new PixiTextContainer(cjs, text);\r\n\t\r\n\treturn createPixiData<PixiTextContainer>(pixi, pixi.pivot);\r\n}\r\n\r\nexport interface IParsedText {\r\n\tfontSize: number;\r\n\tfontFamily: string;\r\n\tfontWeight?: string | number;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Text;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Text.html | createjs.Text]]\r\n */\r\nexport class CreatejsText extends mixinCreatejsDisplayObject(createjs.Text) implements ICreatejsDisplayObjectUpdater {\r\n\tprotected _pixiData: IPixiTextData;\r\n\tprotected _createjsParams: ICreatejsTextParam;\r\n\tprotected _createjsEventManager: EventManager;\r\n\t\r\n\tconstructor(text: string, font: string, color: string = '#000000', ...args: any[]) {\r\n\t\tsuper(text, font, color, ...args);\r\n\t\t\r\n\t\tthis._createjsParams = createCreatejsTextParams(text, font, color);\r\n\t\t\r\n\t\tconst _font = this._parseFont(font);\r\n\t\t\r\n\t\tconst t = new PixiText(text, {\r\n\t\t\tfontWeight: _font.fontWeight,\r\n\t\t\tfontSize: _font.fontSize,\r\n\t\t\tfontFamily: _font.fontFamily,\r\n\t\t\tfill: this._parseColor(color),\r\n\t\t\twordWrap: true\r\n\t\t});\r\n\t\t\r\n\t\tthis._pixiData = createPixiTextData(this, t);\r\n\t\tthis._pixiData.instance.addChild(t);\r\n\t\t\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.call(this, text, font, color, ...args);\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tget text() {\r\n\t\treturn this._createjsParams.text;\r\n\t}\r\n\t\r\n\tset text(text) {\r\n\t\tthis._pixiData.instance.text.text = text;\r\n\t\tthis._align(this.textAlign);\r\n\t\t\r\n\t\tthis._createjsParams.text = text;\r\n\t}\r\n\t\r\n\tprivate _parseFont(font: string): IParsedText {\r\n\t\tconst p = font.split(' ');\r\n\t\t\r\n\t\tlet w = 'normal';\r\n\t\tlet s = p.shift() || '';\r\n\t\t\r\n\t\tif (s.indexOf('px') === -1) {\r\n\t\t\tw = s;\r\n\t\t\ts = p.shift() || '';\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\tfontWeight: w,\r\n\t\t\tfontSize: Number((s || '0px').replace('px', '')),\r\n\t\t\tfontFamily: p.join(' ').replace(/'/g, '') //'\r\n\t\t};\r\n\t}\r\n\t\r\n\tget font() {\r\n\t\treturn this._createjsParams.font;\r\n\t}\r\n\t\r\n\tset font(font) {\r\n\t\tconst _font = this._parseFont(font);\r\n\t\tthis._pixiData.instance.text.style.fontSize = _font.fontSize;\r\n\t\tthis._pixiData.instance.text.style.fontFamily = _font.fontFamily;\r\n\t\t\r\n\t\tthis._createjsParams.font = font;\r\n\t}\r\n\t\r\n\tprivate _parseColor(color: string) {\r\n\t\treturn parseInt(color.slice(1), 16);\r\n\t}\r\n\t\r\n\tget color() {\r\n\t\treturn this._createjsParams.color;\r\n\t}\r\n\t\r\n\tset color(color) {\r\n\t\tthis._pixiData.instance.text.style.fill = this._parseColor(color);\r\n\t\t\r\n\t\tthis._createjsParams.color = color;\r\n\t}\r\n\t\r\n\tprivate _align(align: TTextAlign) {\r\n\t\tif (align === 'left') {\r\n\t\t\tthis._pixiData.instance.text.x = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'center') {\r\n\t\t\tthis._pixiData.instance.text.x = -this._pixiData.instance.text.width / 2;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'right') {\r\n\t\t\tthis._pixiData.instance.text.x =  -this._pixiData.instance.text.width;\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\tget textAlign() {\r\n\t\treturn this._createjsParams.textAlign;\r\n\t}\r\n\t\r\n\tset textAlign(align) {\r\n\t\tthis._pixiData.instance.text.style.align = align;\r\n\t\tthis._align(align);\r\n\t\t\r\n\t\tthis._createjsParams.textAlign = align;\r\n\t}\r\n\t\r\n\tget lineHeight() {\r\n\t\treturn this._createjsParams.lineHeight;\r\n\t}\r\n\t\r\n\tset lineHeight(height) {\r\n\t\tthis._pixiData.instance.text.style.lineHeight = height;\r\n\t\t\r\n\t\tthis._createjsParams.lineHeight = height;\r\n\t}\r\n\t\r\n\tget lineWidth() {\r\n\t\treturn this._createjsParams.lineWidth;\r\n\t}\r\n\t\r\n\tset lineWidth(width) {\r\n\t\tthis._pixiData.instance.text.style.wordWrapWidth = width;\r\n\t\tthis._align(this.textAlign);\r\n\t\t\r\n\t\tthis._createjsParams.lineWidth = width;\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsText.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsTextParams('', '', ''),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiTextData(createObject<CreatejsText>(CreatejsText.prototype), new PixiText('')),\r\n\t\twritable: true\r\n\t}\r\n});","import { filters } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { ICreatejsParam, IPixiData, createCreatejsParams, createPixiData } from './core';\r\nimport { createObject } from './utils';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.ColorMatrixFilter.html | PIXI.Sprite]]\r\n */\r\nexport class PixiColorMatrixFilter extends filters.ColorMatrixFilter {\r\n\tprivate _createjs: CreatejsColorFilter;\r\n\t\r\n\tconstructor(cjs: CreatejsColorFilter) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface IPixiColorMatrixFilterData {\r\n\tinstance: PixiColorMatrixFilter;\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiColorMatrixFilterData(cjs: CreatejsColorFilter): IPixiColorMatrixFilterData {\r\n\tconst pixi = new PixiColorMatrixFilter(cjs);\r\n\t\r\n\treturn { instance: pixi };\r\n}\r\n\r\nexport interface ICreatejsColorFilterParam extends ICreatejsParam {\r\n\tredMultiplier: number;\r\n    greenMultiplier: number;\r\n    blueMultiplier: number;\r\n    alphaMultiplier: number;\r\n    redOffset: number;\r\n    greenOffset: number;\r\n    blueOffset: number;\r\n    alphaOffset: number;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsColorFilterParams(): ICreatejsColorFilterParam {\r\n\treturn Object.assign(createCreatejsParams(), {\r\n\t\tredMultiplier: 1,\r\n        greenMultiplier: 1,\r\n        blueMultiplier: 1,\r\n        alphaMultiplier: 1,\r\n        redOffset: 0,\r\n        greenOffset: 0,\r\n        blueOffset: 0,\r\n        alphaOffset: 0\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.ColorFilter;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/ColorFilter.html | createjs.ColorFilter]]\r\n */\r\nexport class CreatejsColorFilter extends createjs.ColorFilter {\r\n    protected _pixiData: IPixiColorMatrixFilterData;\r\n    protected _createjsParams: ICreatejsColorFilterParam;\r\n\r\n    constructor(...args: number[]) {\r\n        super(args);\r\n\r\n        const pixiData = this._pixiData = createPixiColorMatrixFilterData(this);\r\n        const createjsParams = this._createjsParams = createCreatejsColorFilterParams();\r\n\r\n        // ColorFilterのtweenは、列挙可能かつ hasOwnPropery なプロパティにアクセスしてしまうので、enumerableを切っておく\r\n        Object.defineProperties(this, {\r\n            _pixiData: {\r\n                enumerable: false,\r\n                value: pixiData\r\n            },\r\n            _createjsParams: {\r\n                enumerable: false,\r\n                value: createjsParams\r\n            },\r\n            redMultiplier: {\r\n                get() {\r\n                    return this._createjsParams.redMultiplier;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[0] = value, this._createjsParams.redMultiplier = value;\r\n                }\r\n            },\r\n            greenMultiplier: {\r\n                get() {\r\n                    return this._createjsParams.greenMultiplier;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[6] = value, this._createjsParams.greenMultiplier = value;\r\n                }\r\n            },\r\n            blueMultiplier: {\r\n                get() {\r\n                    return this._createjsParams.blueMultiplier;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[12] = value, this._createjsParams.blueMultiplier = value;\r\n                }\r\n            },\r\n            alphaMultiplier: {\r\n                get() {\r\n                    return this._createjsParams.alphaMultiplier;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[18] = value, this._createjsParams.alphaMultiplier = value;\r\n                },\r\n            },\r\n            redOffset: {\r\n                get() {\r\n                    return this._createjsParams.redOffset;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[4] = value / 255, this._createjsParams.redOffset = value;\r\n                }\r\n            },\r\n            greenOffset: {\r\n                get() {\r\n                    return this._createjsParams.greenOffset;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[9] = value / 255, this._createjsParams.greenOffset = value;\r\n                }\r\n            },\r\n            blueOffset: {\r\n                get() {\r\n                    return this._createjsParams.blueOffset;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[14] = value / 255, this._createjsParams.blueOffset = value;\r\n                }\r\n            },\r\n            alphaOffset: {\r\n                get() {\r\n                    return this._createjsParams.alphaOffset;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[19] = value / 255, this._createjsParams.alphaOffset = value;\r\n                }\r\n            }\r\n        });\r\n\r\n        P.apply(this, args);\r\n    }\r\n    \r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsColorFilter.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsColorFilterParams(),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiColorMatrixFilterData(createObject<CreatejsColorFilter>(CreatejsColorFilter.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});","import { Container as _Container, Ticker } from 'pixi.js';\r\nimport { CreatejsMovieClip, TCreatejsObject } from './createjs';\r\n\r\nexport interface ICreatejsMovieClipDictionary {\r\n\t[id: number]: CreatejsMovieClip;\r\n}\r\n\r\nexport interface ICreatejsData {\r\n\tid: number;\r\n\ttargets: ICreatejsMovieClipDictionary;\r\n}\r\n\r\n/**\r\n * [[https://tawaship.github.io/Pixim.js/classes/container.html | Pixim.Container]]\r\n */\r\nexport class Container extends _Container {\r\n\tprivate _createjsData: ICreatejsData;\r\n\t\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjsData = {\r\n\t\t\tid: 0,\r\n\t\t\ttargets: {}\r\n\t\t};\r\n\t}\r\n\t\r\n\thandleTick(delta: number) {\r\n\t\t// delta timeが1以上になるとフレーム飛びするので\r\n\t\tconst e = { delta: Math.min(delta, 1)};\r\n\r\n\t\tconst targets = this._createjsData.targets;\r\n\t\tfor (let i in targets) {\r\n\t\t\ttargets[i].updateForPixi(e);\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate _addCreatejs(cjs: TCreatejsObject) {\r\n\t\tif (cjs instanceof CreatejsMovieClip) {\r\n\t\t\tconst p = cjs.pixi.parent;\r\n\t\t\t\r\n\t\t\tcjs.pixi.once('added', () => {\r\n\t\t\t\tif (cjs.pixi.parent !== p) {\r\n\t\t\t\t\tcjs.gotoAndPlay(0);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst id = this._createjsData.id++;\r\n\t\t\t\tthis._createjsData.targets[id] = cjs;\r\n\t\t\t\t\r\n\t\t\t\tcjs.pixi.once('removed', () => {\r\n\t\t\t\t\tdelete(this._createjsData.targets[id]);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\taddCreatejs(cjs: TCreatejsObject) {\r\n\t\tthis._addCreatejs(cjs);\r\n\t\tthis.addChild(cjs.pixi);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\taddCreatejsAt(cjs: TCreatejsObject, index: number) {\r\n\t\tthis._addCreatejs(cjs);\r\n\t\tthis.addChildAt(cjs.pixi, index);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\tremoveCreatejs(cjs: TCreatejsObject) {\r\n\t\tthis.removeChild(cjs.pixi);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n}","import * as PIXI from 'pixi.js';\r\nimport * as PA from './modules';\r\nimport createjs from '@tawaship/createjs-module';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const AdobeAn: any;\r\n\r\nexport interface IAnimateLibrary {\r\n\t[ name: string ]: any;\r\n}\r\n\r\nexport interface ILoadAssetOption {\r\n\t/**\r\n\t * Whether to use assets on a server in another domain.\r\n\t */\r\n\tcrossOrigin?: boolean;\r\n\r\n\t/**\r\n\t * Whether to use sound on createjs.\r\n\t */\r\n\tuseSound?: boolean;\r\n\r\n\t/**\r\n\t * Whether to fire events related to frames.\r\n\t */\r\n\tuseFrameEvent?: PA.IFrameEventOption;\r\n};\r\n\r\nexport interface IPrepareTarget {\r\n\t/**\r\n\t * \"lib.properties.id\" in Animate content.\r\n\t */\r\n\tid: string;\r\n\t\r\n\t/**\r\n\t * Directory path of Animate content.\r\n\t */\r\n\tbasepath: string;\r\n\t\r\n\toptions?: ILoadAssetOption;\r\n};\r\n\r\nexport interface IAnimateManifest {\r\n\tsrc: string;\r\n\tid: string;\r\n\ttype?: string;\r\n\tcrossOrigin?: boolean;\r\n\t[key: string]: any;\r\n}\r\n\r\n/**\r\n * Load the assets of createjs content published by Adobe Animate.\r\n * If you use multiple contents, each composition ID must be unique.\r\n * Please run \"Pixim.animate.init\" before running.\r\n */\r\nexport function loadAssetAsync(targets: IPrepareTarget | IPrepareTarget[]) {\r\n\tif (!Array.isArray(targets)) {\r\n\t\ttargets = [targets];\r\n\t}\r\n\t\r\n\tconst promises: Promise<IAnimateLibrary>[] = [];\r\n\r\n\tfor (let i = 0; i < targets.length; i++) {\r\n\t\tconst target = targets[i];\r\n\t\t\r\n\t\tconst comp = AdobeAn.getComposition(target.id);\r\n\t\tif (!comp) {\r\n\t\t\tthrow new Error(`no composition: ${target.id}`);\r\n\t\t}\r\n\t\t\r\n\t\tconst lib: IAnimateLibrary = comp.getLibrary();\r\n\t\tconst manifests: IAnimateManifest[] = lib.properties.manifest;\r\n\t\tconst crossOrigin = typeof(target.options?.crossOrigin) === 'boolean' ? target.options.crossOrigin : true;\r\n\t\t\r\n\t\tfor (let i = 0; i < manifests.length; i++) {\r\n\t\t\tconst manifest = manifests[i];\r\n\t\t\t\r\n\t\t\tmanifest.src = PIXI.utils.url.resolve(target.basepath, manifest.src);\r\n\r\n\t\t\tif (manifest.src.indexOf('data:image') === 0) {\r\n\t\t\t\tmanifest.type = \"image\";\r\n\t\t\t} else if (manifest.src.indexOf('data:audio') === 0) {\r\n\t\t\t\tmanifest.type = \"sound\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (crossOrigin) {\r\n\t\t\tfor (let i = 0; i < manifests.length; i++) {\r\n\t\t\t\tconst manifest = manifests[i].crossOrigin = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst loadPromise = new Promise((resolve, reject) => {\r\n\t\t\tif (lib.properties.manifest.length === 0) {\r\n\t\t\t\tresolve({});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst loader = new createjs.LoadQueue(false);\r\n\t\t\t\r\n\t\t\tif (target.options?.useSound) {\r\n\t\t\t\tloader.installPlugin(createjs.Sound);\r\n\t\t\t}\r\n\r\n\t\t\tconst errors: any[] = [];\r\n\t\t\t\r\n\t\t\tloader.addEventListener('fileload', (evt: any) => {\r\n\t\t\t\thandleFileLoad(evt, comp);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tloader.addEventListener('complete', (evt: any) => {\r\n\t\t\t\tif (errors.length) {\r\n\t\t\t\t\treject(errors);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tresolve(evt);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tloader.addEventListener('error', (evt: any) => {\r\n\t\t\t\terrors.push(evt.data);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tloader.loadManifest(lib.properties.manifest || []);\r\n\t\t})\r\n\t\t.then((evt: any) => {\r\n\t\t\tconst ss = comp.getSpriteSheet();\r\n\t\t\tconst queue = evt.target;\r\n\t\t\tconst ssMetadata = lib.ssMetadata;\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < ssMetadata.length; i++) {\r\n\t\t\t\tss[ssMetadata[i].name] = new createjs.SpriteSheet({\r\n\t\t\t\t\timages: [\r\n\t\t\t\t\t\tqueue.getResult(ssMetadata[i].name)\r\n\t\t\t\t\t],\r\n\t\t\t\t\tframes: ssMetadata[i].frames\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn lib;\r\n\t\t});\r\n\r\n\t\tpromises.push(\r\n\t\t\tloadPromise\r\n\t\t\t.then((lib: IAnimateLibrary) => {\r\n\t\t\t\tfor (let i  in lib) {\r\n\t\t\t\t\tif (lib[i].prototype instanceof PA.CreatejsMovieClip) {\r\n\t\t\t\t\t\tlib[i].prototype._framerateBase = lib.properties.fps;\r\n\t\t\t\t\t\tlib[i].prototype._useFrameEvent = target.options?.useFrameEvent;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn lib;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\t\r\n\treturn Promise.all(promises)\r\n\t\t.then((resolvers: IAnimateLibrary[]) => {\r\n\t\t\tif (resolvers.length === 1) {\r\n\t\t\t\treturn resolvers[0];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn resolvers;\r\n\t\t});\r\n}\r\n\r\nexport function setupCreatejs() {\r\n\t// overrides\r\n\tcreatejs.Stage = PA.CreatejsStage;\r\n\tcreatejs.StageGL = PA.CreatejsStageGL;\r\n\tcreatejs.MovieClip = PA.CreatejsMovieClip;\r\n\tcreatejs.Sprite = PA.CreatejsSprite;\r\n\tcreatejs.Shape = PA.CreatejsShape;\r\n\tcreatejs.Bitmap = PA.CreatejsBitmap;\r\n\tcreatejs.Graphics = PA.CreatejsGraphics;\r\n\tcreatejs.Text = PA.CreatejsText;\r\n\tcreatejs.ButtonHelper = PA.CreatejsButtonHelper;\r\n\tcreatejs.ColorFilter = PA.CreatejsColorFilter;\r\n\r\n\t// install plugins\r\n\tcreatejs.MotionGuidePlugin.install();\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction handleFileLoad(evt: any, comp: any) {\r\n\tconst images = comp.getImages();\r\n\tif (evt && (evt.item.type == 'image')) {\r\n\t\timages[evt.item.id] = evt.result;\r\n\t}\r\n}"],"names":["CreatejsButtonHelper","super","args","const","createjs","pixi","baseFrame","overFrame","downFrame","hit","arguments","hitFrame","gotoAndStop","hitPixi","addChild","alpha","let","isOver","isDown","on","interactive","cursor","ButtonHelper","createObject","proto","Object","create","DEG_TO_RAD","Math","PI","createPixiData","regObj","instance","updateDisplayObjectChildren","cjs","e","list","children","slice","i","l","length","updateForPixi","mixinCreatejsDisplayObject","superClass","prototypeAccessors","this","_pixiData","x","_createjsParams","value","y","scaleX","scale","scaleY","skewX","skew","skewY","regX","regY","rotation","visible","_off","renderable","addEventListener","type","cb","_createjsEventManager","add","removeEventListener","remove","removeAllEventListeners","removeAll","mask","masked","push","once","parent","CreatejsStage","props","tickOnUpdate","tick","dispatchEvent","Stage","CreatejsStageGL","StageGL","createjsInteractionEvents","mousedown","pressmove","pressup","rollover","rollout","click","EventManager","_cjs","_emitter","utils","EventEmitter","_onPointerDown","_onPointerMove","_onPointerUp","_onPointerUpOutside","_onPointerTap","_onPointerOver","_onPointerOut","currentTarget","target","ev","data","rawX","global","rawY","_isDown","emit","off","eventNames","removeAllListeners","PixiMovieClip","_createjs","filterContainer","_filterContainer","Container","createCreatejsMovieClipParams","assign","filters","createPixiMovieClipData","pivot","subInstance","AnimateEvent","Event","ReachLabelEvent","label","P","MovieClip","CreatejsMovieClip","apply","framerate","_framerateBase","endAnimation","reachLabel","initialize","currentFrame","advance","delta","_useFrameEvent","totalFrames","labels","position","_updateState","prototypeAccessors$1","f","ColorFilter","child","addChildAt","index","removeChild","removeChildAt","removeAllChldren","removeChildren","prototype","defineProperties","writable","PixiSprite","Sprite","createPixiSpriteData","anchor","CreatejsSprite","frame","spriteSheet","getFrame","baseTexture","BaseTexture","from","image","texture","Texture","rect","PixiShape","createCreatejsShapeParams","graphics","createPixiShapeData","Shape","CreatejsShape","PixiBitmap","createPixiBitmapData","Bitmap","CreatejsBitmap","res","PixiGraphics","Graphics","createPixiGraphicsData","strokeFill","strokeAlpha","LineCap","0","LINE_CAP","BUTT","1","ROUND","2","SQUARE","LineJoin","LINE_JOIN","MITER","BEVEL","CreatejsGraphics","beginFill","moveTo","clone","endFill","containsPoint","beginHole","endHole","mt","lineTo","lt","arcTo","x1","y1","x2","y2","radius","at","arc","startAngle","endAngle","anticlockwise","a","quadraticCurveTo","cpx","cpy","qt","curveTo","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","bt","w","h","drawRect","r","dr","closePath","cp","clear","c","_parseColor","color","charAt","parseInt","colors","replace","split","Number","ef","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","lineTextureStyle","width","cap","join","ss","beginStroke","s","drawRoundRect","drawRoundedRect","rr","drawCircle","dc","drawEllipse","de","drawPolyStar","sides","pointSize","angle","drawRegularPolygon","dp","PixiText","Text","PixiTextContainer","text","_text","createCreatejsTextParams","font","textAlign","lineHeight","lineWidth","createPixiTextData","CreatejsText","_font","_parseFont","t","fontWeight","fontSize","fontFamily","fill","wordWrap","call","_align","p","shift","indexOf","style","align","height","wordWrapWidth","PixiColorMatrixFilter","ColorMatrixFilter","createPixiColorMatrixFilterData","createCreatejsColorFilterParams","redMultiplier","greenMultiplier","blueMultiplier","alphaMultiplier","redOffset","greenOffset","blueOffset","alphaOffset","CreatejsColorFilter","pixiData","createjsParams","enumerable","get","set","matrix","_createjsData","id","targets","handleTick","min","_addCreatejs","gotoAndPlay","addCreatejs","addCreatejsAt","removeCreatejs","_Container","PA.CreatejsStage","PA.CreatejsStageGL","PA.CreatejsMovieClip","PA.CreatejsSprite","PA.CreatejsShape","PA.CreatejsBitmap","PA.CreatejsGraphics","PA.CreatejsText","PA.CreatejsButtonHelper","PA.CreatejsColorFilter","MotionGuidePlugin","install"],"mappings":"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"}