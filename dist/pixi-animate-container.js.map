{"version":3,"file":"pixi-animate-container.js","sources":["../src/createjs/modules/ButtonHelper.ts","../src/createjs/modules/utils.ts","../src/createjs/modules/core.ts","../src/createjs/modules/Stage.ts","../src/createjs/modules/StageGL.ts","../src/createjs/modules/EventManager.ts","../src/createjs/modules/MovieClip.ts","../src/createjs/modules/Sprite.ts","../src/createjs/modules/Shape.ts","../src/createjs/modules/Bitmap.ts","../src/createjs/modules/Graphics.ts","../src/createjs/modules/Text.ts","../src/createjs/modules/ColorFilter.ts","../src/Container.ts","../src/createjs/core.ts"],"sourcesContent":["import createjs from '@tawaship/createjs-module';\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/ButtonHelper.html | createjs.ButtonHelper]]\r\n */\r\nexport class CreatejsButtonHelper extends createjs.ButtonHelper {\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tconst createjs = args[0];\r\n\t\tconst pixi = createjs.pixi;\r\n\t\t\r\n\t\tconst baseFrame = args[1];\r\n\t\tconst overFrame = args[2];\r\n\t\tconst downFrame = args[3];\r\n\t\tconst hit = arguments[5];\r\n\t\tconst hitFrame = args[6];\r\n\t\t\r\n\t\thit.gotoAndStop(hitFrame);\r\n\t\tconst hitPixi = pixi.addChild(hit.pixi);\r\n\t\thitPixi.alpha = 0.00001;\r\n\t\t\r\n\t\tlet isOver = false;\r\n\t\tlet isDown = false;\r\n\t\t\r\n\t\thitPixi.on('pointerover', function() {\r\n\t\t\tisOver = true;\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerout', function() {\r\n\t\t\tisOver = false;\r\n\t\t\t\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerdown', function() {\r\n\t\t\tisDown = true;\r\n\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerup', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerupoutside', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.interactive = true;\r\n\t\thitPixi.cursor = 'pointer';\r\n\t}\r\n}","export function createObject<T>(proto: object): T {\r\n\treturn Object.create(proto);\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport const DEG_TO_RAD = Math.PI / 180;","import { Container, Point } from 'pixi.js';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsStage } from './Stage';\r\nimport { CreatejsStageGL } from './StageGL';\r\nimport { CreatejsMovieClip, PixiMovieClip } from './MovieClip';\r\nimport { CreatejsSprite } from './Sprite';\r\nimport { CreatejsShape } from './Shape';\r\nimport { CreatejsBitmap } from './Bitmap';\r\nimport { CreatejsGraphics } from './Graphics';\r\nimport { CreatejsText } from './Text';\r\nimport { EventManager, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { DEG_TO_RAD } from './utils';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Point.html | PIXI.Point]]\r\n */\r\ndeclare class PixiPoint {};\r\n\r\nexport { Point as PixiPoint };\r\n\r\nexport interface ITickerData {\r\n\tdelta: number;\r\n}\r\n\r\nexport interface IPixiData<T extends Container> {\r\n\tregObj: Point;\r\n\tinstance: T;\r\n}\r\n\r\nexport function createPixiData<TPixiDisplayObject extends Container>(pixi: TPixiDisplayObject, regObj: Point): IPixiData<TPixiDisplayObject> {\r\n\treturn {\r\n\t\tregObj,\r\n\t\tinstance: pixi\r\n\t};\r\n}\r\n\r\nexport type TCreatejsMask = CreatejsShape | null;\r\n\r\nexport interface ICreatejsParam {\r\n\tx: number;\r\n\ty: number;\r\n\tscaleX: number;\r\n\tscaleY: number;\r\n\tregX: number;\r\n\tregY: number;\r\n\tskewX: number;\r\n\tskewY: number;\r\n\trotation: number;\r\n\tvisible: boolean;\r\n\talpha: number;\r\n\t_off: boolean;\r\n\tmask: TCreatejsMask;\r\n}\r\n\r\nexport type TCreatejsObject =\r\n\tCreatejsStage\r\n\t| CreatejsStageGL\r\n\t| CreatejsMovieClip\r\n\t| CreatejsSprite\r\n\t| CreatejsShape\r\n\t| CreatejsBitmap\r\n\t| CreatejsGraphics\r\n\t| CreatejsText;\r\n\r\nexport function createCreatejsParams(): ICreatejsParam {\r\n\treturn {\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\tscaleX: 0,\r\n\t\tscaleY: 0,\r\n\t\tregX: 0,\r\n\t\tregY: 0,\r\n\t\tskewX: 0,\r\n\t\tskewY: 0,\r\n\t\trotation: 0,\r\n\t\tvisible: true,\r\n\t\talpha: 1,\r\n\t\t_off: false,\r\n\t\tmask: null\r\n\t};\r\n}\r\n\r\nexport type TCreatejsDisplayObject = any/* createjs.DisplayObject */;\r\n\r\nexport interface ICreatejsDisplayObjectUpdater extends TCreatejsDisplayObject {\r\n\tupdateForPixi(e: ITickerData): boolean;\r\n}\r\n\r\nexport interface ICreatejsDisplayObjectInitializer {\r\n\tinitialize(...args: any[]): any;\r\n}\r\n\r\nexport function updateDisplayObjectChildren(cjs: ICreatejsDisplayObjectUpdater, e: ITickerData) {\r\n\tconst list = cjs.children.slice();\r\n\tfor (let i = 0, l = list.length; i < l; i++) {\r\n\t\tconst child = list[i];\r\n\t\tchild.updateForPixi(e);\r\n\t}\r\n\t\r\n\treturn true;\r\n}\r\n\r\nexport interface IMixinedCreatejsDisplayObject extends ICreatejsParam, TCreatejsDisplayObject {\r\n\tpixi: Container;\r\n\taddEventListener(type: string, cb: ICreatejsInteractionEventDelegate | CreatejsButtonHelper, ...args: any[]): any;\r\n\tremoveEventListener(type: string, cb: ICreatejsInteractionEventDelegate, ...args: any[]): any;\r\n\tremoveAllEventListeners(type?: string, ...args: any[]): any;\r\n}\r\n\r\ntype TMixinedCreatejsDisplayObjectClass = abstract new (...args: any[]) => IMixinedCreatejsDisplayObject;\r\n\r\nexport function mixinCreatejsDisplayObject(superClass: new (...args: any[]) => TCreatejsDisplayObject): TMixinedCreatejsDisplayObjectClass {\r\n\tabstract class C extends superClass {\r\n\t\tprotected abstract _pixiData: IPixiData<Container>;\r\n\t\tprotected abstract _createjsParams: ICreatejsParam;\r\n\t\tprotected abstract _createjsEventManager: EventManager;\r\n\t\t\r\n\t\tget pixi() {\r\n\t\t\treturn this._pixiData.instance;\r\n\t\t}\r\n\t\t\r\n\t\tget x() {\r\n\t\t\treturn this._createjsParams.x;\r\n\t\t}\r\n\t\t\r\n\t\tset x(value) {\r\n\t\t\tthis._pixiData.instance.x = value;\r\n\t\t\tthis._createjsParams.x = value;\r\n\t\t}\r\n\t\t\r\n\t\tget y() {\r\n\t\t\treturn this._createjsParams.y;\r\n\t\t}\r\n\t\t\r\n\t\tset y(value) {\r\n\t\t\tthis._pixiData.instance.y = value;\r\n\t\t\tthis._createjsParams.y = value;\r\n\t\t}\r\n\t\t\r\n\t\tget scaleX() {\r\n\t\t\treturn this._createjsParams.scaleX;\r\n\t\t}\r\n\t\t\t\r\n\t\tset scaleX(value) {\r\n\t\t\tthis._pixiData.instance.scale.x = value;\r\n\t\t\tthis._createjsParams.scaleX = value;\r\n\t\t}\r\n\t\t\r\n\t\tget scaleY() {\r\n\t\t\treturn this._createjsParams.scaleY;\r\n\t\t}\r\n\t\t\r\n\t\tset scaleY(value) {\r\n\t\t\tthis._pixiData.instance.scale.y = value;\r\n\t\t\tthis._createjsParams.scaleY = value;\r\n\t\t}\r\n\t\t\r\n\t\tget skewX() {\r\n\t\t\treturn this._createjsParams.skewX;\r\n\t\t}\r\n\t\t\r\n\t\tset skewX(value) {\r\n\t\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n\t\t\tthis._createjsParams.skewX = value;\r\n\t\t}\r\n\t\t\r\n\t\tget skewY() {\r\n\t\t\treturn this._createjsParams.skewY;\r\n\t\t}\r\n\t\t\r\n\t\tset skewY(value) {\r\n\t\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n\t\t\tthis._createjsParams.skewY = value;\r\n\t\t}\r\n\t\t\r\n\t\tget regX() {\r\n\t\t\treturn this._createjsParams.regX;\r\n\t\t}\r\n\t\t\r\n\t\tset regX(value) {\r\n\t\t\tthis._pixiData.regObj.x = value;\r\n\t\t\tthis._createjsParams.regX = value;\r\n\t\t}\r\n\t\t\r\n\t\tget regY() {\r\n\t\t\treturn this._createjsParams.regY;\r\n\t\t}\r\n\t\t\r\n\t\tset regY(value) {\r\n\t\t\tthis._pixiData.regObj.y = value;\r\n\t\t\tthis._createjsParams.regY = value;\r\n\t\t}\r\n\t\t\r\n\t\tget rotation() {\r\n\t\t\treturn this._createjsParams.rotation;\r\n\t\t}\r\n\t\t\r\n\t\tset rotation(value) {\r\n\t\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n\t\t\tthis._createjsParams.rotation = value;\r\n\t\t}\r\n\t\t\r\n\t\tget visible() {\r\n\t\t\treturn this._createjsParams.visible;\r\n\t\t}\r\n\t\t\r\n\t\tset visible(value) {\r\n\t\t\tvalue = !!value;\r\n\t\t\tthis._pixiData.instance.visible = value;\r\n\t\t\tthis._createjsParams.visible = value;\r\n\t\t}\r\n\t\t\r\n\t\tget alpha() {\r\n\t\t\treturn this._createjsParams.alpha;\r\n\t\t}\r\n\t\t\r\n\t\tset alpha(value) {\r\n\t\t\tthis._pixiData.instance.alpha = value;\r\n\t\t\tthis._createjsParams.alpha = value;\r\n\t\t}\r\n\t\t\r\n\t\tget _off() {\r\n\t\t\treturn this._createjsParams._off;\r\n\t\t}\r\n\t\t\r\n\t\tset _off(value) {\r\n\t\t\tthis._pixiData.instance.renderable = !value;\r\n\t\t\tthis._createjsParams._off = value;\r\n\t\t}\r\n\t\t\r\n\t\taddEventListener(type: string, cb: ICreatejsInteractionEventDelegate | CreatejsButtonHelper, ...args: any[]) {\r\n\t\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\t\tthis._createjsEventManager.add(type, cb);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn super.addEventListener(type, cb, ...args);\r\n\t\t}\r\n\t\t\r\n\t\tremoveEventListener(type: string, cb: ICreatejsInteractionEventDelegate, ...args: any[]) {\r\n\t\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\t\tthis._createjsEventManager.remove(type, cb);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn super.removeEventListener(type, cb, ...args);\r\n\t\t}\r\n\t\t\r\n\t\tremoveAllEventListeners(type?: string, ...args: any[]) {\r\n\t\t\tthis._createjsEventManager.removeAll(type);\r\n\t\t\t\r\n\t\t\treturn super.removeAllEventListeners(type, ...args);\r\n\t\t}\r\n\t\t\r\n\t\tget mask() {\r\n\t\t\treturn this._createjsParams.mask;\r\n\t\t}\r\n\t\t\r\n\t\tset mask(value: TCreatejsMask) {\r\n\t\t\tif (value) {\r\n\t\t\t\tvalue.masked.push(this._pixiData.instance);\r\n\t\t\t\tthis._pixiData.instance.mask = value.pixi;\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.instance.once('added', () => {\r\n\t\t\t\t\tthis._pixiData.instance.parent.addChild(value.pixi);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._createjsParams.mask = value;\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn C;\r\n}","import createjs from '@tawaship/createjs-module';\r\nimport { updateDisplayObjectChildren, ITickerData, ICreatejsDisplayObjectUpdater } from './core';\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Stage.html | createjs.Stage]]\r\n */\r\nexport class CreatejsStage extends createjs.Stage implements ICreatejsDisplayObjectUpdater {\r\n\tupdateForPixi(props: ITickerData) {\r\n\t\tif (this.tickOnUpdate) { this.tick(props); }\r\n\t\tthis.dispatchEvent(\"drawstart\");\r\n\t\tupdateDisplayObjectChildren(this, props);\r\n\t\tthis.dispatchEvent(\"drawend\");\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n}","import createjs from '@tawaship/createjs-module';\r\nimport { updateDisplayObjectChildren, ITickerData, ICreatejsDisplayObjectUpdater } from './core';\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/StageGL.html | createjs.StageGL]]\r\n */\r\nexport class CreatejsStageGL extends createjs.StageGL implements ICreatejsDisplayObjectUpdater {\r\n\tupdateForPixi(props: ITickerData) {\r\n\t\tif (this.tickOnUpdate) { this.tick(props); }\r\n\t\tthis.dispatchEvent(\"drawstart\");\r\n\t\tupdateDisplayObjectChildren(this, props);\r\n\t\tthis.dispatchEvent(\"drawend\");\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n}","import { TCreatejsObject, ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer } from './core';\r\nimport { DisplayObject, utils } from 'pixi.js';\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst createjsInteractionEvents = {\r\n\tmousedown: true,\r\n\tpressmove: true,\r\n\tpressup: true,\r\n\trollover: true,\r\n\trollout: true,\r\n\tclick: true\r\n};\r\n\r\nexport interface ICreatejsInteractionEventDelegate {\r\n\t (e: any): void;\r\n}\r\n\r\nexport class EventManager {\r\n\tprivate _isDown: boolean = false;\r\n\tprivate _emitter: utils.EventEmitter;\r\n\tprivate _cjs: TCreatejsObject;\r\n\t\r\n\tconstructor(cjs: TCreatejsObject) {\r\n\t\tthis._cjs = cjs;\r\n\t\tthis._emitter = new utils.EventEmitter();\r\n\t\t\r\n\t\tconst pixi = cjs.pixi;\r\n\t\t\r\n\t\tpixi\r\n\t\t.on('pointerdown', this._onPointerDown, this)\r\n\t\t.on('pointermove', this._onPointerMove, this)\r\n\t\t.on('pointerup', this._onPointerUp, this)\r\n\t\t.on('pointerupoutside', this._onPointerUpOutside, this)\r\n\t\t.on('pointertap', this._onPointerTap, this)\r\n\t\t.on('pointerover', this._onPointerOver, this)\r\n\t\t.on('pointerout', this._onPointerOut, this);\r\n\t}\r\n\t\r\n\tprivate _onPointerDown(e: any) {\r\n\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\r\n\t\te.target = e.target.createjs;\r\n\t\tconst ev = e.data;\r\n\t\te.rawX = ev.global.x;\r\n\t\te.rawY = ev.global.y;\r\n\t\t\r\n\t\tthis._isDown = true;\r\n\t\t\r\n\t\tthis._emitter.emit('mousedown', e);\r\n\t}\r\n\t\r\n\tprivate _onPointerMove(e: any) {\r\n\t\tif (!this._isDown) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\te.currentTarget = this._cjs;\r\n\t\t\r\n\t\te.target = e.target && e.target.createjs;\r\n\t\tconst ev = e.data;\r\n\t\te.rawX = ev.global.x;\r\n\t\te.rawY = ev.global.y;\r\n\t\t\r\n\t\tthis._emitter.emit('pressmove', e);\r\n\t}\r\n\t\r\n\tprivate _onPointerUp(e: any) {\r\n\t\te.currentTarget = this._cjs;\r\n\t\t\r\n\t\te.target = e.target && e.target.createjs;\r\n\t\tconst ev = e.data;\r\n\t\te.rawX = ev.global.x;\r\n\t\te.rawY = ev.global.y;\r\n\t\t\r\n\t\tthis._isDown = false;\r\n\t\t\r\n\t\tthis._emitter.emit('pressup', e);\r\n\t}\r\n\t\r\n\tprivate _onPointerUpOutside(e: any) {\r\n\t\te.currentTarget = this._cjs;\r\n\t\t\r\n\t\te.target = e.target && e.target.createjs;\r\n\t\tconst ev = e.data;\r\n\t\te.rawX = ev.global.x;\r\n\t\te.rawY = ev.global.y;\r\n\t\t\r\n\t\tthis._isDown = false;\r\n\t\t\r\n\t\tthis._emitter.emit('pressup', e);\r\n\t}\r\n\t\r\n\tprivate _onPointerTap(e: any) {\r\n\t\te.currentTarget = this._cjs;\r\n\t\t\r\n\t\te.target = e.target && e.target.createjs;\r\n\t\tconst ev = e.data;\r\n\t\te.rawX = ev.global.x;\r\n\t\te.rawY = ev.global.y;\r\n\t\t\r\n\t\tthis._emitter.emit('click', e);\r\n\t}\r\n\t\r\n\tprivate _onPointerOver(e: any) {\r\n\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\r\n\t\te.target = e.currentTarget.createjs;\r\n\t\tconst ev = e.data;\r\n\t\te.rawX = ev.global.x;\r\n\t\te.rawY = ev.global.y;\r\n\t\t\r\n\t\tthis._emitter.emit('rollover', e);\r\n\t}\r\n\t\r\n\tprivate _onPointerOut(e: any) {\r\n\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\r\n\t\te.target = e.currentTarget.createjs;\r\n\t\tconst ev = e.data;\r\n\t\te.rawX = ev.global.x;\r\n\t\te.rawY = ev.global.y;\r\n\t\t\r\n\t\tthis._emitter.emit('rollout', e);\r\n\t}\r\n\t\r\n\tadd(type: string, cb: ICreatejsInteractionEventDelegate) {\r\n\t\tif (!(type in createjsInteractionEvents)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._emitter.off(type, cb);\r\n\t\tthis._emitter.on(type, cb);\r\n\t\t\r\n\t\tif (this._emitter.eventNames().length > 0) {\r\n\t\t\tthis._cjs.pixi.interactive = true;\r\n\t\t}\r\n\t}\r\n\t\r\n\tremove(type: string, cb: ICreatejsInteractionEventDelegate) {\r\n\t\tif (!(type in createjsInteractionEvents)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._emitter.off(type, cb);\r\n\t\t\r\n\t\tif (this._emitter.eventNames().length === 0) {\r\n\t\t\tthis._cjs.pixi.interactive = false;\r\n\t\t}\r\n\t}\r\n\t\r\n\tremoveAll(type?: string) {\r\n\t\tif (type && !(type in createjsInteractionEvents)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis._emitter.removeAllListeners(type);\r\n\t\t\r\n\t\tif (this._emitter.eventNames().length === 0) {\r\n\t\t\tthis._cjs.pixi.interactive = false;\r\n\t\t}\r\n\t}\r\n}","import { Container } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { CreatejsColorFilter, PixiColorMatrixFilter } from './ColorFilter';\r\nimport { mixinCreatejsDisplayObject, createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, updateDisplayObjectChildren, ITickerData, ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer } from './core';\r\nimport { createObject } from './utils';\r\nimport { EventManager } from './EventManager';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nexport class PixiMovieClip extends Container {\r\n\tprivate _createjs: CreatejsMovieClip;\r\n\tprivate _filterContainer: Container | null = null;\r\n\t\r\n\tconstructor(cjs: CreatejsMovieClip) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget filterContainer() {\r\n\t\treturn this._filterContainer;\r\n\t}\r\n\t\r\n\tset filterContainer(value) {\r\n\t\tthis._filterContainer = value;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport type TCreatejsColorFilters = CreatejsColorFilter[] | null;\r\n\r\nexport interface ICreatejsMovieClipParam extends ICreatejsParam {\r\n\tfilters: TCreatejsColorFilters;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsMovieClipParams(): ICreatejsMovieClipParam {\r\n\treturn Object.assign(createCreatejsParams(), {\r\n\t\tfilters: null\r\n\t});\r\n}\r\n\r\nexport interface IPixiMovieClipData extends IPixiData<PixiMovieClip> {\r\n\tsubInstance: Container;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiMovieClipData(cjs: CreatejsMovieClip): IPixiMovieClipData {\r\n\tconst pixi = new PixiMovieClip(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData<PixiMovieClip>(pixi, pixi.pivot), {\r\n\t\tsubInstance: pixi\r\n\t});\r\n}\r\n\r\nexport const b = 1;\r\n\r\nexport class AnimateEvent extends createjs.Event {\r\n\tconstructor(type: string) {\r\n\t\tsuper(type);\r\n\t}\r\n};\r\n\r\nexport interface IReachLabelData {\r\n\t/**\r\n\t * Label name.\r\n\t */\r\n\tlabel: string;\r\n\t\r\n\t/**\r\n\t * Frame number of label.\r\n\t */\r\n\tposition: number;\r\n}\r\n\r\nexport class ReachLabelEvent extends AnimateEvent {\r\n\tdata: IReachLabelData;\r\n\t\r\n\tconstructor(type: string, label: IReachLabelData) {\r\n\t\tsuper(type);\r\n\t\t\r\n\t\tthis.data = label;\r\n\t}\r\n}\r\n\r\nexport interface IFrameEventOption {\r\n\tendAnimation?: boolean;\r\n\treachLabel?: boolean;\r\n}\r\n\r\nconst P = createjs.MovieClip;\r\n\r\nconst T: number = 1000 / 60;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/MovieClip.html | createjs.MovieClip]]\r\n */\r\nexport class CreatejsMovieClip extends mixinCreatejsDisplayObject(createjs.MovieClip) implements ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer {\r\n\tprotected _pixiData: IPixiMovieClipData;\r\n\tprotected _createjsParams: ICreatejsMovieClipParam;\r\n\tprotected _createjsEventManager: EventManager;\r\n\r\n\tdeclare protected _framerateBase: number;\r\n\tdeclare protected _useFrameEvent: IFrameEventOption;\r\n\r\n\t/**\r\n\t * When the last frame of the timeline is reached.\r\n\t * \r\n\t * @event\r\n\t */\r\n\tendAnimation?(e: AnimateEvent): void {}\r\n\t\r\n\t/**\r\n\t * When either labels is reached.\r\n\t * \r\n\t * @event\r\n\t */\r\n\treachLabel?(e: ReachLabelEvent): void {}\r\n\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._pixiData = createPixiMovieClipData(this);\r\n\t\tthis._createjsParams = createCreatejsMovieClipParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\tP.apply(this, args);\r\n\t\tthis.framerate = this._framerateBase;\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiMovieClipData(this);\r\n\t\tthis._createjsParams = createCreatejsMovieClipParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\tsuper.initialize(...args);\r\n\t\tthis.framerate = this._framerateBase;\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData): boolean {\r\n\t\tconst currentFrame = this.currentFrame;\r\n\t\t\r\n\t\tthis.advance(T * e.delta);\r\n\t\t\r\n\t\tif (currentFrame !== this.currentFrame) {\r\n\t\t\tif (this._useFrameEvent.endAnimation && this.currentFrame === (this.totalFrames - 1)) {\r\n\t\t\t\tthis.dispatchEvent(new AnimateEvent('endAnimation'));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this._useFrameEvent.reachLabel) {\r\n\t\t\t\tfor (let i = 0; i < this.labels.length; i++) {\r\n\t\t\t\t\tconst label = this.labels[i];\r\n\t\t\t\t\tif (this.currentFrame === label.position) {\r\n\t\t\t\t\t\tthis.dispatchEvent(new ReachLabelEvent('reachLabel', label));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._updateState();\r\n\t\t\r\n\t\treturn updateDisplayObjectChildren(this, e);\r\n\t}\r\n\t\r\n\tget filters() {\r\n\t\treturn this._createjsParams.filters;\r\n\t}\r\n\t\r\n\t//*\r\n\tset filters(value: TCreatejsColorFilters) {\r\n\t\tconst list: PixiColorMatrixFilter[] = [];\r\n\r\n\t\tif (value && value.length > 0) {\r\n\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\tlet f = value[i];\r\n\t\t\t\t\r\n\t\t\t\tif (!(f instanceof createjs.ColorFilter)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlist.push(f.pixi);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._pixiData.instance.filters = list;\r\n\t\tthis._createjsParams.filters = value;\r\n\t}\r\n\t//*/\r\n\t/*\r\n\tset filters(value: TCreatejsColorFilters) {\r\n\t\tif (value) {\r\n\t\t\tconst list = [];\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\tconst f = value[i];\r\n\t\t\t\t\r\n\t\t\t\tif (f instanceof createjs.ColorMatrixFilter) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst m = new filters.ColorMatrixFilter();\r\n\t\t\t\tm.matrix = [\r\n\t\t\t\t\tf.redMultiplier, 0, 0, 0, f.redOffset / 255,\r\n\t\t\t\t\t0, f.greenMultiplier, 0, 0, f.greenOffset / 255,\r\n\t\t\t\t\t0, 0, f.blueMultiplier, 0, f.blueOffset / 255,\r\n\t\t\t\t\t0, 0, 0, f.alphaMultiplier, f.alphaOffset / 255,\r\n\t\t\t\t\t0, 0, 0, 0, 1\r\n\t\t\t\t];\r\n\t\t\t\tlist.push(m);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\tlet f = value[i];\r\n\t\t\t\t\r\n\t\t\t\tif (!(f instanceof createjs.ColorFilter)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlist.push(f.pixi);\r\n\t\t\t}\r\n\r\n\t\t\tvar o = this._pixiData.instance;\r\n\t\t\tvar c = o.children;\r\n\t\t\tvar n = new Container();\r\n\t\t\tvar nc = this._pixiData.subInstance = n.addChild(new Container());\r\n\t\t\t\r\n\t\t\twhile (c.length) {\r\n\t\t\t\tnc.addChild(c[0]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\to.addChild(n);\r\n\t\t\to.filterContainer = nc;\r\n\t\t\t\r\n\t\t\tnc.updateTransform();\r\n\t\t\tnc.calculateBounds();\r\n\t\t\t\r\n\t\t\tconst b = nc.getLocalBounds();\r\n\t\t\tconst x = b.x;\r\n\t\t\tconst y = b.y;\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < nc.children.length; i++) {\r\n\t\t\t\tconst child = nc.children[i];\r\n\t\t\t\t\r\n\t\t\t\tchild.x -= x;\r\n\t\t\t\tchild.y -= y;\r\n\t\t\t\t\r\n\t\t\t\tif (child instanceof PixiMovieClip) {\r\n\t\t\t\t\tconst fc = child.filterContainer;\r\n\t\t\t\t\tif (fc) {\r\n\t\t\t\t\t\t//fc.cacheAsBitmap = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tn.x = x;\r\n\t\t\tn.y = y;\r\n\t\t\t\r\n\t\t\tnc.filters = list;\r\n\t\t\t//nc.cacheAsBitmap = true;\r\n\t\t} else {\r\n\t\t\tconst o = this._pixiData.instance;\r\n\t\t\t\r\n\t\t\tif (o.filterContainer) {\r\n\t\t\t\tconst nc = this._pixiData.subInstance;\r\n\t\t\t\tconst n = nc.parent;\r\n\t\t\t\tconst c = nc.children;\r\n\t\t\t\t\r\n\t\t\t\to.removeChildren();\r\n\t\t\t\to.filterContainer = null;\r\n\t\t\t\twhile (c.length) {\r\n\t\t\t\t\tconst v = o.addChild(c[0]);\r\n\t\t\t\t\tv.x += n.x;\r\n\t\t\t\t\tv.y += n.y;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tnc.filters = [];\r\n\t\t\t\t//nc.cacheAsBitmap = false;\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.subInstance = o;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis._createjsParams.filters = value;\r\n\t}\r\n\t//*/\r\n\t\r\n\taddChild(child: ICreatejsDisplayObjectUpdater) {\r\n\t\tthis._pixiData.subInstance.addChild(child.pixi);\r\n\t\t\r\n\t\treturn super.addChild(child);\r\n\t}\r\n\t\r\n\taddChildAt(child: ICreatejsDisplayObjectUpdater, index: number) {\r\n\t\tthis._pixiData.subInstance.addChildAt(child.pixi, index);\r\n\t\t\r\n\t\treturn super.addChildAt(child, index);\r\n\t}\r\n\t\r\n\tremoveChild(child: ICreatejsDisplayObjectUpdater) {\r\n\t\tthis._pixiData.subInstance.removeChild(child.pixi);\r\n\t\t\r\n\t\treturn super.removeChild(child);\r\n\t}\r\n\t\r\n\tremoveChildAt(index: number) {\r\n\t\tthis._pixiData.subInstance.removeChildAt(index);\r\n\t\t\r\n\t\treturn super.removeChildAt(index);\r\n\t}\r\n\t\r\n\tremoveAllChldren() {\r\n\t\tthis._pixiData.subInstance.removeChildren();\r\n\t\t\r\n\t\treturn super.removeAllChldren();\r\n\t}\r\n}\r\n\r\ndelete(CreatejsMovieClip.prototype.endAnimation);\r\ndelete(CreatejsMovieClip.prototype.reachLabel);\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsMovieClip.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsMovieClipParams(),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiMovieClipData(createObject<CreatejsMovieClip>(CreatejsMovieClip.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});\r\n\r\n","import { Sprite, Texture, BaseTexture } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { mixinCreatejsDisplayObject, createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, ITickerData, TCreatejsMask, ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer } from './core';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsShape } from './Shape';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Sprite.html | PIXI.Sprite]]\r\n */\r\nexport class PixiSprite extends Sprite {\r\n\tprivate _createjs: CreatejsSprite | {};\r\n\t\r\n\tconstructor(cjs: CreatejsSprite | {}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface ICreatejsSpriteParam extends ICreatejsParam {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsSpriteParams(): ICreatejsSpriteParam {\r\n\treturn createCreatejsParams();\r\n}\r\n\r\nexport interface IPixiSpriteData extends IPixiData<PixiSprite> {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiSpriteData(cjs: CreatejsSprite | {}): IPixiSpriteData {\r\n\tconst pixi = new PixiSprite(cjs);\r\n\t\r\n\treturn createPixiData<PixiSprite>(pixi, pixi.anchor)\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Sprite;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Sprite.html | createjs.Sprite]]\r\n */\r\nexport class CreatejsSprite extends mixinCreatejsDisplayObject(createjs.Sprite) implements ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer {\r\n\tprotected _pixiData: IPixiSpriteData;\r\n\tprotected _createjsParams: ICreatejsSpriteParam;\r\n\tprotected _createjsEventManager: EventManager;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._pixiData = createPixiSpriteData(this);\r\n\t\tthis._createjsParams = createCreatejsSpriteParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.apply(this, args);\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiSpriteData(this);\r\n\t\tthis._createjsParams = createCreatejsSpriteParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\treturn super.initialize(...args);\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tgotoAndStop(...args: any[]) {\r\n\t\tsuper.gotoAndStop(...args);\r\n\t\t\r\n\t\tconst frame = this.spriteSheet.getFrame(this.currentFrame);\r\n\t\tconst baseTexture = BaseTexture.from(frame.image);\r\n\t\tconst texture = new Texture(baseTexture, frame.rect);\r\n\t\t\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsSprite.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsSpriteParams(),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiSpriteData(createObject<CreatejsSprite>(CreatejsSprite.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});","import { DisplayObject, Container } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { mixinCreatejsDisplayObject, createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, ITickerData, TCreatejsMask, ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer } from './core';\r\nimport { CreatejsGraphics } from './Graphics';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nexport class PixiShape extends Container {\r\n\tprivate _createjs: CreatejsShape;\r\n\t\r\n\tconstructor(cjs: CreatejsShape) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface ICreatejsShapeParam extends ICreatejsParam {\r\n\tgraphics: CreatejsGraphics | null;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsShapeParams(graphics: CreatejsGraphics | null): ICreatejsShapeParam {\r\n\treturn Object.assign(createCreatejsParams(), {\r\n\t\tgraphics\r\n\t});\r\n}\r\n\r\nexport interface IPixiShapeData extends IPixiData<PixiShape> {\r\n\t/**\r\n\t * [[http://pixijs.download/release/docs/PIXI.DisplayObject.html | PIXI.DisplayObject]]\r\n\t */\r\n\tmasked: DisplayObject[];\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiShapeData(cjs: CreatejsShape): IPixiShapeData {\r\n\tconst pixi = new PixiShape(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData<PixiShape>(pixi, pixi.pivot), {\r\n\t\tmasked: []\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Shape;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Shape.html | createjs.Shape]]\r\n */\r\nexport class CreatejsShape extends mixinCreatejsDisplayObject(createjs.Shape) implements ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer {\r\n\tprotected _pixiData: IPixiShapeData;\r\n\tprotected _createjsParams: ICreatejsShapeParam;\r\n\tprotected _createjsEventManager: EventManager;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._pixiData = createPixiShapeData(this);\r\n\t\tthis._createjsParams = createCreatejsShapeParams(null);\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.apply(this, args);\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiShapeData(this);\r\n\t\tthis._createjsParams = createCreatejsShapeParams(null);\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\treturn super.initialize(...args);\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tget graphics() {\r\n\t\treturn this._createjsParams.graphics;\r\n\t}\r\n\t\r\n\tset graphics(value) {\r\n\t\tif (this._pixiData.masked.length) {\r\n\t\t\tthis._pixiData.instance.removeChildren();\r\n\t\t\t\r\n\t\t\tif (value) {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = this._pixiData.instance;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (value) {\r\n\t\t\tthis._pixiData.instance.addChild(value.pixi);\r\n\t\t}\r\n\t\t\r\n\t\tthis._createjsParams.graphics = value;\r\n\t}\r\n\t\r\n\tget masked() {\r\n\t\treturn this._pixiData.masked;\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsShape.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsShapeParams(null),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiShapeData(createObject<CreatejsShape>(CreatejsShape.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});","import { Sprite, Texture } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { mixinCreatejsDisplayObject, createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, ITickerData, TCreatejsMask, ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer } from './core';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsShape } from './Shape';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Sprite.html | PIXI.Sprite]]\r\n */\r\nexport class PixiBitmap extends Sprite {\r\n\tprivate _createjs: CreatejsBitmap;\r\n\t\r\n\tconstructor(cjs: CreatejsBitmap) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface ICreatejsBitmapParam extends ICreatejsParam {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsBitmapParams(): ICreatejsBitmapParam {\r\n\treturn createCreatejsParams();\r\n}\r\n\r\nexport interface IPixiBitmapData extends IPixiData<PixiBitmap> {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiBitmapData(cjs: CreatejsBitmap): IPixiBitmapData {\r\n\tconst pixi = new PixiBitmap(cjs);\r\n\t\r\n\treturn createPixiData<PixiBitmap>(pixi, pixi.anchor);\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Bitmap;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Bitmap.html | createjs.Bitmap]]\r\n */\r\nexport class CreatejsBitmap extends mixinCreatejsDisplayObject(createjs.Bitmap) implements ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer {\r\n\tprotected _pixiData: IPixiBitmapData;\r\n\tprotected _createjsParams: ICreatejsBitmapParam;\r\n\tprotected _createjsEventManager: EventManager;\r\n\t \r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._pixiData = createPixiBitmapData(this);\r\n\t\tthis._createjsParams = createCreatejsBitmapParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.apply(this, args);\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiBitmapData(this);\r\n\t\tthis._createjsParams = createCreatejsBitmapParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tconst res = super.initialize(...args);\r\n\t\tconst texture = Texture.from(this.image);\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t\t\r\n\t\treturn res;\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsBitmap.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsBitmapParams(),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiBitmapData(createObject<CreatejsBitmap>(CreatejsBitmap.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});\r\n","import { Graphics, LINE_CAP, LINE_JOIN} from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { mixinCreatejsDisplayObject, createPixiData, createCreatejsParams, IPixiData, ICreatejsParam,  ITickerData, TCreatejsMask, ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer } from './core';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsShape } from './Shape';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Graphics.html | PIXI.Graphics]]\r\n */\r\nexport class PixiGraphics extends Graphics {\r\n\tprivate _createjs: CreatejsGraphics;\r\n\t\r\n\tconstructor(cjs: CreatejsGraphics) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface ICreatejsGraphicsParam extends ICreatejsParam {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsGraphicsParams(): ICreatejsGraphicsParam {\r\n\treturn createCreatejsParams();\r\n}\r\n\r\nexport interface IPixiGraphicsData extends IPixiData<PixiGraphics> {\r\n\tstrokeFill: number;\r\n\tstrokeAlpha: number;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiGraphicsData(cjs: CreatejsGraphics): IPixiGraphicsData {\r\n\tconst pixi = new PixiGraphics(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData<PixiGraphics>(pixi, pixi.pivot), {\r\n\t\tstrokeFill: 0,\r\n\t\tstrokeAlpha: 1\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_RED = 16 * 16 * 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_GREEN = 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineCap = {\r\n\t0: LINE_CAP.BUTT,\r\n\t1: LINE_CAP.ROUND,\r\n\t2: LINE_CAP.SQUARE\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineJoin = {\r\n\t0: LINE_JOIN.MITER,\r\n\t1: LINE_JOIN.ROUND,\r\n\t2: LINE_JOIN.BEVEL\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Graphics;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Graphics.html | createjs.Graphics]]\r\n */\r\nexport class CreatejsGraphics extends mixinCreatejsDisplayObject(createjs.Graphics) implements ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer {\r\n\tprotected _pixiData: IPixiGraphicsData;\r\n\tprotected _createjsParams: ICreatejsGraphicsParam;\r\n\tprotected _createjsEventManager: EventManager;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._pixiData = createPixiGraphicsData(this);\r\n\t\tthis._createjsParams = createCreatejsGraphicsParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.apply(this, args);\r\n\t\t\r\n\t\tthis._pixiData.instance.beginFill(0xFFEEEE, 1);\r\n\t\tthis._pixiData.strokeFill = 0;\r\n\t\tthis._pixiData.strokeAlpha = 1;\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiGraphicsData(this);\r\n\t\tthis._createjsParams = createCreatejsGraphicsParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\treturn super.initialize(...args);\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\t// path methods\r\n\t\r\n\tmoveTo(x: number, y: number) {\r\n\t\tif (this._pixiData.instance.clone().endFill().containsPoint({x: x, y: y})) {\r\n\t\t\tthis._pixiData.instance.beginHole();\r\n\t\t} else {\r\n\t\t\tthis._pixiData.instance.endHole();\r\n\t\t}\r\n\t\t\r\n\t\tthis._pixiData.instance.moveTo(x, y);\r\n\t\t\r\n\t\treturn super.moveTo(x, y);\r\n\t}\r\n\t\r\n\tmt(x: number, y: number) {\r\n\t\treturn this.moveTo(x, y);\r\n\t}\r\n\t\r\n\tlineTo(x: number, y: number) {\r\n\t\tthis._pixiData.instance.lineTo(x, y);\r\n\t\t\r\n\t\treturn super.lineTo(x, y);\r\n\t}\r\n\t\r\n\tlt(x: number, y: number) {\r\n\t\treturn this.lineTo(x, y);\r\n\t}\r\n\t\r\n\tarcTo(x1: number, y1: number, x2: number, y2: number, radius: number) {\r\n\t\tthis._pixiData.instance.arcTo(x1, y1, x2, y2, radius);\r\n\t\t\r\n\t\treturn super.arcTo(x1, y1, x2, y2, radius);\r\n\t}\r\n\t\r\n\tat(x1: number, y1: number, x2: number, y2: number, radius: number) {\r\n\t\treturn this.arcTo(x1, y1, x2, y2, radius);\r\n\t}\r\n\t\r\n\tarc(x: number, y: number, radius: number, startAngle: number, endAngle: number, anticlockwise: boolean) {\r\n\t\tthis._pixiData.instance.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t\t\r\n\t\treturn super.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t}\r\n\t\r\n\ta(x: number, y: number, radius: number, startAngle: number, endAngle: number, anticlockwise: boolean) {\r\n\t\treturn this.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t}\r\n\t\r\n\tquadraticCurveTo(cpx: number, cpy: number, x: number, y: number) {\r\n\t\tthis._pixiData.instance.quadraticCurveTo(cpx, cpy, x, y);\r\n\t\t\r\n\t\treturn super.quadraticCurveTo(cpx, cpy, x, y);\r\n\t}\r\n\t\r\n\tqt(cpx: number, cpy: number, x: number, y: number) {\r\n\t\treturn this.quadraticCurveTo(cpx, cpy, x, y);\r\n\t}\r\n\t\r\n\tcurveTo(cpx: number, cpy: number, x: number, y: number) {\r\n\t\treturn this.quadraticCurveTo(cpx, cpy, x, y);\r\n\t}\r\n\t\r\n\tbezierCurveTo(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number) {\r\n\t\tthis._pixiData.instance.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t\t\r\n\t\treturn super.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t}\r\n\t\r\n\tbt(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number) {\r\n\t\treturn this.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t}\r\n\t\r\n\trect(x: number, y: number, w: number, h: number) {\r\n\t\tthis._pixiData.instance.drawRect(x, y, w, h);\r\n\t\t\r\n\t\treturn super.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tr(x: number, y: number, w: number, h: number) {\r\n\t\treturn this.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tdrawRect(x: number, y: number, w: number, h: number) {\r\n\t\treturn this.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tdr(x: number, y: number, w: number, h: number) {\r\n\t\treturn this.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tclosePath() {\r\n\t\tthis._pixiData.instance.closePath();\r\n\t\t\r\n\t\treturn super.closePath();\r\n\t}\r\n\t\r\n\tcp() {\r\n\t\treturn this.closePath();\r\n\t}\r\n\t\r\n\tclear() {\r\n\t\tthis._pixiData.instance.clear();\r\n\t\t\r\n\t\treturn super.clear();\r\n\t}\r\n\t\r\n\tc() {\r\n\t\treturn this.clear();\r\n\t}\r\n\t\r\n\tprivate _parseColor(color: string) {\r\n\t\tconst res = {\r\n\t\t\tcolor: 0,\r\n\t\t\talpha: 1\r\n\t\t};\r\n\t\t\r\n\t\tif (!color) {\r\n\t\t\tres.alpha = 0;\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tif (color.charAt(0) === '#') {\r\n\t\t\tres.color = parseInt(color.slice(1), 16);\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tconst colors = color.replace(/rgba|\\(|\\)|\\s/g, '').split(',');\r\n\t\t\r\n\t\tres.color = Number(colors[0]) * COLOR_RED + Number(colors[1]) * COLOR_GREEN + Number(colors[2]);\r\n\t\tres.alpha = Number(colors[3]);\r\n\t\t\r\n\t\treturn res;\r\n\t}\r\n\t\r\n\tbeginFill(color: string) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.instance.beginFill(c.color, c.alpha);\r\n\t\t\r\n\t\treturn super.beginFill(color);\r\n\t}\r\n\t\r\n\tf(color: string) {\r\n\t\treturn this.beginFill(color);\r\n\t}\r\n\t\r\n\tendFill() {\r\n\t\tthis._pixiData.instance.endFill();\r\n\t\t\r\n\t\treturn super.endFill();\r\n\t}\r\n\t\r\n\tef() {\r\n\t\treturn this.endFill();\r\n\t}\r\n\t\r\n\tsetStrokeStyle(thickness: number, caps: 0 | 1 | 2, joints: 0 | 1 | 2, miterLimit: number, ignoreScale: boolean) {\r\n\t\tthis._pixiData.instance.lineTextureStyle({\r\n\t\t\twidth: thickness,\r\n\t\t\tcolor: this._pixiData.strokeFill,\r\n\t\t\talpha: this._pixiData.strokeAlpha,\r\n\t\t\tcap: (caps in LineCap) ? LineCap[caps] : LineCap[0],\r\n\t\t\tjoin: (joints in LineJoin) ? LineJoin[joints] : LineJoin[0],\r\n\t\t\tmiterLimit\r\n\t\t});\r\n\t\t\r\n\t\treturn super.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n\t}\r\n\t\r\n\tss(thickness: number, caps: 0 | 1 | 2, joints: 0 | 1 | 2, miterLimit: number, ignoreScale: boolean) {\r\n\t\treturn this.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n\t}\r\n\t\r\n\tbeginStroke(color: string) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.strokeFill = c.color;\r\n\t\tthis._pixiData.strokeAlpha = c.alpha;\r\n\t\t\r\n\t\treturn super.beginStroke(color);\r\n\t}\r\n\t\r\n\ts(color: string) {\r\n\t\treturn this.beginStroke(color);\r\n\t}\r\n\t\r\n\tdrawRoundRect(x: number, y: number, w: number, h: number, radius: number) {\r\n\t\tthis._pixiData.instance.drawRoundedRect(x, y, w, h, radius);\r\n\t\t\r\n\t\treturn super.drawRoundRect(x, y, w, h, radius);\r\n\t}\r\n\t\r\n\trr(x: number, y: number, w: number, h: number, radius: number) {\r\n\t\treturn this.drawRoundRect(x, y, w, h, radius);\r\n\t}\r\n\t\r\n\tdrawCircle(x: number, y: number, radius: number) {\r\n\t\tthis._pixiData.instance.drawCircle(x, y, radius);\r\n\t\t\r\n\t\treturn super.drawCircle(x, y, radius);\r\n\t}\r\n\t\r\n\tdc(x: number, y: number, radius: number) {\r\n\t\treturn this.drawCircle(x, y, radius);\r\n\t}\r\n\t\r\n\tdrawEllipse(x: number, y: number, w: number, h: number) {\r\n\t\tthis._pixiData.instance.drawEllipse(x, y, w, h);\r\n\t\t\r\n\t\treturn super.drawEllipse(x, y, w, h);\r\n\t}\r\n\t\r\n\tde(x: number, y: number, w: number, h: number) {\r\n\t\treturn this.drawEllipse(x, y, w, h);\r\n\t}\r\n\t\r\n\tdrawPolyStar(x: number, y: number, radius: number, sides: number, pointSize: number, angle: number) {\r\n\t\tthis._pixiData.instance.drawRegularPolygon(x, y, radius, sides, angle * DEG_TO_RAD);\r\n\t\t\r\n\t\treturn super.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n\t}\r\n\t\r\n\tdp(x: number, y: number, radius: number, sides: number, pointSize: number, angle: number) {\r\n\t\treturn this.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsGraphics.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsGraphicsParams(),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiGraphicsData(createObject<CreatejsGraphics>(CreatejsGraphics.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});","import { Container, Text } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { mixinCreatejsDisplayObject, createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, ITickerData, TCreatejsMask, ICreatejsDisplayObjectUpdater, ICreatejsDisplayObjectInitializer } from './core';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsShape } from './Shape';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Text.html | PIXI.Text]]\r\n */\r\nexport class PixiText extends Text {}\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nexport class PixiTextContainer extends Container {\r\n\tprivate _createjs: CreatejsText;\r\n\tprivate _text: PixiText;\r\n\t\r\n\tconstructor(cjs: CreatejsText, text: PixiText) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t\tthis._text = text;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n\t\r\n\tget text() {\r\n\t\treturn this._text;\r\n\t}\r\n}\r\n\r\nexport type TTextAlign = 'left' | 'center' | 'right';\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst DEF_ALIGN: TTextAlign = 'left';\r\n\r\nexport interface ICreatejsTextParam extends ICreatejsParam {\r\n\ttext: string;\r\n\tfont: string;\r\n\tcolor: string;\r\n\ttextAlign: TTextAlign;\r\n\tlineHeight: number;\r\n\tlineWidth: number;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsTextParams(text: string, font: string, color: string): ICreatejsTextParam {\r\n\treturn Object.assign(createCreatejsParams(), {\r\n\t\ttext: text,\r\n\t\tfont: font,\r\n\t\tcolor: color,\r\n\t\ttextAlign: DEF_ALIGN,\r\n\t\tlineHeight: 0,\r\n\t\tlineWidth: 0\r\n\t});\r\n}\r\n\r\nexport interface IPixiTextData extends IPixiData<PixiTextContainer> {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiTextData(cjs: CreatejsText, text: PixiText): IPixiTextData {\r\n\tconst pixi = new PixiTextContainer(cjs, text);\r\n\t\r\n\treturn createPixiData<PixiTextContainer>(pixi, pixi.pivot);\r\n}\r\n\r\nexport interface IParsedText {\r\n\tfontSize: number;\r\n\tfontFamily: string;\r\n\tfontWeight?: string | number;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Text;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Text.html | createjs.Text]]\r\n */\r\nexport class CreatejsText extends mixinCreatejsDisplayObject(createjs.Text) implements ICreatejsDisplayObjectUpdater {\r\n\tprotected _pixiData: IPixiTextData;\r\n\tprotected _createjsParams: ICreatejsTextParam;\r\n\tprotected _createjsEventManager: EventManager;\r\n\t\r\n\tconstructor(text: string, font: string, color: string = '#000000', ...args: any[]) {\r\n\t\tsuper(text, font, color, ...args);\r\n\t\t\r\n\t\tthis._createjsParams = createCreatejsTextParams(text, font, color);\r\n\t\t\r\n\t\tconst _font = this._parseFont(font);\r\n\t\t\r\n\t\tconst t = new PixiText(text, {\r\n\t\t\tfontWeight: _font.fontWeight,\r\n\t\t\tfontSize: _font.fontSize,\r\n\t\t\tfontFamily: _font.fontFamily,\r\n\t\t\tfill: this._parseColor(color),\r\n\t\t\twordWrap: true\r\n\t\t});\r\n\t\t\r\n\t\tthis._pixiData = createPixiTextData(this, t);\r\n\t\tthis._pixiData.instance.addChild(t);\r\n\t\t\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.call(this, text, font, color, ...args);\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tget text() {\r\n\t\treturn this._createjsParams.text;\r\n\t}\r\n\t\r\n\tset text(text) {\r\n\t\tthis._pixiData.instance.text.text = text;\r\n\t\tthis._align(this.textAlign);\r\n\t\t\r\n\t\tthis._createjsParams.text = text;\r\n\t}\r\n\t\r\n\tprivate _parseFont(font: string): IParsedText {\r\n\t\tconst p = font.split(' ');\r\n\t\t\r\n\t\tlet w = 'normal';\r\n\t\tlet s = p.shift() || '';\r\n\t\t\r\n\t\tif (s.indexOf('px') === -1) {\r\n\t\t\tw = s;\r\n\t\t\ts = p.shift() || '';\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\tfontWeight: w,\r\n\t\t\tfontSize: Number((s || '0px').replace('px', '')),\r\n\t\t\tfontFamily: p.join(' ').replace(/'/g, '') //'\r\n\t\t};\r\n\t}\r\n\t\r\n\tget font() {\r\n\t\treturn this._createjsParams.font;\r\n\t}\r\n\t\r\n\tset font(font) {\r\n\t\tconst _font = this._parseFont(font);\r\n\t\tthis._pixiData.instance.text.style.fontSize = _font.fontSize;\r\n\t\tthis._pixiData.instance.text.style.fontFamily = _font.fontFamily;\r\n\t\t\r\n\t\tthis._createjsParams.font = font;\r\n\t}\r\n\t\r\n\tprivate _parseColor(color: string) {\r\n\t\treturn parseInt(color.slice(1), 16);\r\n\t}\r\n\t\r\n\tget color() {\r\n\t\treturn this._createjsParams.color;\r\n\t}\r\n\t\r\n\tset color(color) {\r\n\t\tthis._pixiData.instance.text.style.fill = this._parseColor(color);\r\n\t\t\r\n\t\tthis._createjsParams.color = color;\r\n\t}\r\n\t\r\n\tprivate _align(align: TTextAlign) {\r\n\t\tif (align === 'left') {\r\n\t\t\tthis._pixiData.instance.text.x = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'center') {\r\n\t\t\tthis._pixiData.instance.text.x = -this._pixiData.instance.text.width / 2;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'right') {\r\n\t\t\tthis._pixiData.instance.text.x =  -this._pixiData.instance.text.width;\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\tget textAlign() {\r\n\t\treturn this._createjsParams.textAlign;\r\n\t}\r\n\t\r\n\tset textAlign(align) {\r\n\t\tthis._pixiData.instance.text.style.align = align;\r\n\t\tthis._align(align);\r\n\t\t\r\n\t\tthis._createjsParams.textAlign = align;\r\n\t}\r\n\t\r\n\tget lineHeight() {\r\n\t\treturn this._createjsParams.lineHeight;\r\n\t}\r\n\t\r\n\tset lineHeight(height) {\r\n\t\tthis._pixiData.instance.text.style.lineHeight = height;\r\n\t\t\r\n\t\tthis._createjsParams.lineHeight = height;\r\n\t}\r\n\t\r\n\tget lineWidth() {\r\n\t\treturn this._createjsParams.lineWidth;\r\n\t}\r\n\t\r\n\tset lineWidth(width) {\r\n\t\tthis._pixiData.instance.text.style.wordWrapWidth = width;\r\n\t\tthis._align(this.textAlign);\r\n\t\t\r\n\t\tthis._createjsParams.lineWidth = width;\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsText.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsTextParams('', '', ''),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiTextData(createObject<CreatejsText>(CreatejsText.prototype), new PixiText('')),\r\n\t\twritable: true\r\n\t}\r\n});","import { filters } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { ICreatejsParam, IPixiData, createCreatejsParams, createPixiData } from './core';\r\nimport { createObject } from './utils';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.ColorMatrixFilter.html | PIXI.Sprite]]\r\n */\r\nexport class PixiColorMatrixFilter extends filters.ColorMatrixFilter {\r\n\tprivate _createjs: CreatejsColorFilter;\r\n\t\r\n\tconstructor(cjs: CreatejsColorFilter) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface IPixiColorMatrixFilterData {\r\n\tinstance: PixiColorMatrixFilter;\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiColorMatrixFilterData(cjs: CreatejsColorFilter): IPixiColorMatrixFilterData {\r\n\tconst pixi = new PixiColorMatrixFilter(cjs);\r\n\t\r\n\treturn { instance: pixi };\r\n}\r\n\r\nexport interface ICreatejsColorFilterParam extends ICreatejsParam {\r\n\tredMultiplier: number;\r\n    greenMultiplier: number;\r\n    blueMultiplier: number;\r\n    alphaMultiplier: number;\r\n    redOffset: number;\r\n    greenOffset: number;\r\n    blueOffset: number;\r\n    alphaOffset: number;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsColorFilterParams(): ICreatejsColorFilterParam {\r\n\treturn Object.assign(createCreatejsParams(), {\r\n\t\tredMultiplier: 1,\r\n        greenMultiplier: 1,\r\n        blueMultiplier: 1,\r\n        alphaMultiplier: 1,\r\n        redOffset: 0,\r\n        greenOffset: 0,\r\n        blueOffset: 0,\r\n        alphaOffset: 0\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.ColorFilter;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/ColorFilter.html | createjs.ColorFilter]]\r\n */\r\nexport class CreatejsColorFilter extends createjs.ColorFilter {\r\n    protected _pixiData: IPixiColorMatrixFilterData;\r\n    protected _createjsParams: ICreatejsColorFilterParam;\r\n\r\n    constructor(...args: number[]) {\r\n        super(args);\r\n\r\n        const pixiData = this._pixiData = createPixiColorMatrixFilterData(this);\r\n        const createjsParams = this._createjsParams = createCreatejsColorFilterParams();\r\n\r\n        // ColorFiltertween hasOwnPropery enumerable\r\n        Object.defineProperties(this, {\r\n            _pixiData: {\r\n                enumerable: false,\r\n                value: pixiData\r\n            },\r\n            _createjsParams: {\r\n                enumerable: false,\r\n                value: createjsParams\r\n            },\r\n            redMultiplier: {\r\n                get() {\r\n                    return this._createjsParams.redMultiplier;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[0] = value, this._createjsParams.redMultiplier = value;\r\n                }\r\n            },\r\n            greenMultiplier: {\r\n                get() {\r\n                    return this._createjsParams.greenMultiplier;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[6] = value, this._createjsParams.greenMultiplier = value;\r\n                }\r\n            },\r\n            blueMultiplier: {\r\n                get() {\r\n                    return this._createjsParams.blueMultiplier;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[12] = value, this._createjsParams.blueMultiplier = value;\r\n                }\r\n            },\r\n            alphaMultiplier: {\r\n                get() {\r\n                    return this._createjsParams.alphaMultiplier;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[18] = value, this._createjsParams.alphaMultiplier = value;\r\n                },\r\n            },\r\n            redOffset: {\r\n                get() {\r\n                    return this._createjsParams.redOffset;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[4] = value / 255, this._createjsParams.redOffset = value;\r\n                }\r\n            },\r\n            greenOffset: {\r\n                get() {\r\n                    return this._createjsParams.greenOffset;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[9] = value / 255, this._createjsParams.greenOffset = value;\r\n                }\r\n            },\r\n            blueOffset: {\r\n                get() {\r\n                    return this._createjsParams.blueOffset;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[14] = value / 255, this._createjsParams.blueOffset = value;\r\n                }\r\n            },\r\n            alphaOffset: {\r\n                get() {\r\n                    return this._createjsParams.alphaOffset;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[19] = value / 255, this._createjsParams.alphaOffset = value;\r\n                }\r\n            }\r\n        });\r\n\r\n        P.apply(this, args);\r\n    }\r\n    \r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsColorFilter.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsColorFilterParams(),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiColorMatrixFilterData(createObject<CreatejsColorFilter>(CreatejsColorFilter.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});","import { Container as _Container, Ticker } from 'pixi.js';\r\nimport { CreatejsMovieClip, TCreatejsObject } from './createjs';\r\n\r\nexport interface ICreatejsMovieClipDictionary {\r\n\t[id: number]: CreatejsMovieClip;\r\n}\r\n\r\nexport interface ICreatejsData {\r\n\tid: number;\r\n\ttargets: ICreatejsMovieClipDictionary;\r\n}\r\n\r\n/**\r\n * [[https://tawaship.github.io/Pixim.js/classes/container.html | Pixim.Container]]\r\n */\r\nexport class Container extends _Container {\r\n\tprivate _createjsData: ICreatejsData;\r\n\t\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjsData = {\r\n\t\t\tid: 0,\r\n\t\t\ttargets: {}\r\n\t\t};\r\n\t}\r\n\t\r\n\thandleTick(delta: number) {\r\n\t\t// delta time1\r\n\t\tconst e = { delta: Math.min(delta, 1)};\r\n\r\n\t\tconst targets = this._createjsData.targets;\r\n\t\tfor (let i in targets) {\r\n\t\t\ttargets[i].updateForPixi(e);\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate _addCreatejs(cjs: TCreatejsObject) {\r\n\t\tif (cjs instanceof CreatejsMovieClip) {\r\n\t\t\tconst p = cjs.pixi.parent;\r\n\t\t\t\r\n\t\t\tcjs.pixi.once('added', () => {\r\n\t\t\t\tif (cjs.pixi.parent !== p) {\r\n\t\t\t\t\tcjs.gotoAndPlay(0);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst id = this._createjsData.id++;\r\n\t\t\t\tthis._createjsData.targets[id] = cjs;\r\n\t\t\t\t\r\n\t\t\t\tcjs.pixi.once('removed', () => {\r\n\t\t\t\t\tdelete(this._createjsData.targets[id]);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\taddCreatejs(cjs: TCreatejsObject) {\r\n\t\tthis._addCreatejs(cjs);\r\n\t\tthis.addChild(cjs.pixi);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\taddCreatejsAt(cjs: TCreatejsObject, index: number) {\r\n\t\tthis._addCreatejs(cjs);\r\n\t\tthis.addChildAt(cjs.pixi, index);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\tremoveCreatejs(cjs: TCreatejsObject) {\r\n\t\tthis.removeChild(cjs.pixi);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n}","import * as PIXI from 'pixi.js';\r\nimport * as PA from './modules';\r\nimport createjs from '@tawaship/createjs-module';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const AdobeAn: any;\r\n\r\nexport interface IAnimateLibrary {\r\n\t[ name: string ]: any;\r\n}\r\n\r\nexport interface ILoadAssetOption {\r\n\t/**\r\n\t * Whether to use assets on a server in another domain.\r\n\t */\r\n\tcrossOrigin?: boolean;\r\n\r\n\t/**\r\n\t * Whether to use sound on createjs.\r\n\t */\r\n\tuseSound?: boolean;\r\n\r\n\t/**\r\n\t * Whether to fire events related to frames.\r\n\t */\r\n\tuseFrameEvent?: PA.IFrameEventOption;\r\n};\r\n\r\nexport interface IPrepareTarget {\r\n\t/**\r\n\t * \"lib.properties.id\" in Animate content.\r\n\t */\r\n\tid: string;\r\n\t\r\n\t/**\r\n\t * Directory path of Animate content.\r\n\t */\r\n\tbasepath: string;\r\n\t\r\n\toptions?: ILoadAssetOption;\r\n};\r\n\r\nexport interface IAnimateManifest {\r\n\tsrc: string;\r\n\tid: string;\r\n\ttype?: string;\r\n\tcrossOrigin?: boolean;\r\n\t[key: string]: any;\r\n}\r\n\r\n/**\r\n * Load the assets of createjs content published by Adobe Animate.\r\n * If you use multiple contents, each composition ID must be unique.\r\n * Please run \"Pixim.animate.init\" before running.\r\n */\r\nexport function loadAssetAsync(targets: IPrepareTarget | IPrepareTarget[]) {\r\n\tif (!Array.isArray(targets)) {\r\n\t\ttargets = [targets];\r\n\t}\r\n\t\r\n\tconst promises: Promise<IAnimateLibrary>[] = [];\r\n\r\n\tfor (let i = 0; i < targets.length; i++) {\r\n\t\tconst target = targets[i];\r\n\t\t\r\n\t\tconst comp = AdobeAn.getComposition(target.id);\r\n\t\tif (!comp) {\r\n\t\t\tthrow new Error(`no composition: ${target.id}`);\r\n\t\t}\r\n\t\t\r\n\t\tconst lib: IAnimateLibrary = comp.getLibrary();\r\n\t\tconst manifests: IAnimateManifest[] = lib.properties.manifest;\r\n\t\tconst crossOrigin = typeof(target.options?.crossOrigin) === 'boolean' ? target.options.crossOrigin : true;\r\n\t\t\r\n\t\tfor (let i = 0; i < manifests.length; i++) {\r\n\t\t\tconst manifest = manifests[i];\r\n\t\t\t\r\n\t\t\tmanifest.src = PIXI.utils.url.resolve(target.basepath, manifest.src);\r\n\r\n\t\t\tif (manifest.src.indexOf('data:image') === 0) {\r\n\t\t\t\tmanifest.type = \"image\";\r\n\t\t\t} else if (manifest.src.indexOf('data:audio') === 0) {\r\n\t\t\t\tmanifest.type = \"sound\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (crossOrigin) {\r\n\t\t\tfor (let i = 0; i < manifests.length; i++) {\r\n\t\t\t\tconst manifest = manifests[i].crossOrigin = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst loadPromise = new Promise((resolve, reject) => {\r\n\t\t\tif (lib.properties.manifest.length === 0) {\r\n\t\t\t\tresolve({});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst loader = new createjs.LoadQueue(false);\r\n\t\t\t\r\n\t\t\tif (target.options?.useSound) {\r\n\t\t\t\tloader.installPlugin(createjs.Sound);\r\n\t\t\t}\r\n\r\n\t\t\tconst errors: any[] = [];\r\n\t\t\t\r\n\t\t\tloader.addEventListener('fileload', (evt: any) => {\r\n\t\t\t\thandleFileLoad(evt, comp);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tloader.addEventListener('complete', (evt: any) => {\r\n\t\t\t\tif (errors.length) {\r\n\t\t\t\t\treject(errors);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tresolve(evt);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tloader.addEventListener('error', (evt: any) => {\r\n\t\t\t\terrors.push(evt.data);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tloader.loadManifest(lib.properties.manifest || []);\r\n\t\t})\r\n\t\t.then((evt: any) => {\r\n\t\t\tconst ss = comp.getSpriteSheet();\r\n\t\t\tconst queue = evt.target;\r\n\t\t\tconst ssMetadata = lib.ssMetadata;\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < ssMetadata.length; i++) {\r\n\t\t\t\tss[ssMetadata[i].name] = new createjs.SpriteSheet({\r\n\t\t\t\t\timages: [\r\n\t\t\t\t\t\tqueue.getResult(ssMetadata[i].name)\r\n\t\t\t\t\t],\r\n\t\t\t\t\tframes: ssMetadata[i].frames\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn lib;\r\n\t\t});\r\n\r\n\t\tpromises.push(\r\n\t\t\tloadPromise\r\n\t\t\t.then((lib: IAnimateLibrary) => {\r\n\t\t\t\tfor (let i  in lib) {\r\n\t\t\t\t\tif (lib[i].prototype instanceof PA.CreatejsMovieClip) {\r\n\t\t\t\t\t\tlib[i].prototype._framerateBase = lib.properties.fps;\r\n\t\t\t\t\t\tlib[i].prototype._useFrameEvent = target.options?.useFrameEvent;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn lib;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\t\r\n\treturn Promise.all(promises)\r\n\t\t.then((resolvers: IAnimateLibrary[]) => {\r\n\t\t\tif (resolvers.length === 1) {\r\n\t\t\t\treturn resolvers[0];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn resolvers;\r\n\t\t});\r\n}\r\n\r\nexport function setupCreatejs() {\r\n\t// overrides\r\n\tcreatejs.Stage = PA.CreatejsStage;\r\n\tcreatejs.StageGL = PA.CreatejsStageGL;\r\n\tcreatejs.MovieClip = PA.CreatejsMovieClip;\r\n\tcreatejs.Sprite = PA.CreatejsSprite;\r\n\tcreatejs.Shape = PA.CreatejsShape;\r\n\tcreatejs.Bitmap = PA.CreatejsBitmap;\r\n\tcreatejs.Graphics = PA.CreatejsGraphics;\r\n\tcreatejs.Text = PA.CreatejsText;\r\n\tcreatejs.ButtonHelper = PA.CreatejsButtonHelper;\r\n\tcreatejs.ColorFilter = PA.CreatejsColorFilter;\r\n\r\n\t// install plugins\r\n\tcreatejs.MotionGuidePlugin.install();\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction handleFileLoad(evt: any, comp: any) {\r\n\tconst images = comp.getImages();\r\n\tif (evt && (evt.item.type == 'image')) {\r\n\t\timages[evt.item.id] = evt.result;\r\n\t}\r\n}"],"names":["CreatejsButtonHelper","super","args","const","createjs","pixi","baseFrame","overFrame","downFrame","hit","arguments","hitFrame","gotoAndStop","hitPixi","addChild","alpha","let","isOver","isDown","on","interactive","cursor","ButtonHelper","createObject","proto","Object","create","DEG_TO_RAD","Math","PI","createPixiData","regObj","instance","updateDisplayObjectChildren","cjs","e","list","children","slice","i","l","length","updateForPixi","mixinCreatejsDisplayObject","superClass","prototypeAccessors","this","_pixiData","x","_createjsParams","value","y","scaleX","scale","scaleY","skewX","skew","skewY","regX","regY","rotation","visible","_off","renderable","addEventListener","type","cb","_createjsEventManager","add","removeEventListener","remove","removeAllEventListeners","removeAll","mask","masked","push","once","parent","CreatejsStage","props","tickOnUpdate","tick","dispatchEvent","Stage","CreatejsStageGL","StageGL","createjsInteractionEvents","mousedown","pressmove","pressup","rollover","rollout","click","EventManager","_cjs","_emitter","utils","EventEmitter","_onPointerDown","_onPointerMove","_onPointerUp","_onPointerUpOutside","_onPointerTap","_onPointerOver","_onPointerOut","currentTarget","target","ev","data","rawX","global","rawY","_isDown","emit","off","eventNames","removeAllListeners","PixiMovieClip","_createjs","filterContainer","_filterContainer","Container","createCreatejsMovieClipParams","assign","filters","createPixiMovieClipData","pivot","subInstance","AnimateEvent","Event","ReachLabelEvent","label","P","MovieClip","CreatejsMovieClip","apply","framerate","_framerateBase","endAnimation","reachLabel","initialize","currentFrame","advance","delta","_useFrameEvent","totalFrames","labels","position","_updateState","prototypeAccessors$1","f","ColorFilter","child","addChildAt","index","removeChild","removeChildAt","removeAllChldren","removeChildren","prototype","defineProperties","writable","PixiSprite","Sprite","createPixiSpriteData","anchor","CreatejsSprite","frame","spriteSheet","getFrame","baseTexture","BaseTexture","from","image","texture","Texture","rect","PixiShape","createCreatejsShapeParams","graphics","createPixiShapeData","Shape","CreatejsShape","PixiBitmap","createPixiBitmapData","Bitmap","CreatejsBitmap","res","PixiGraphics","Graphics","createPixiGraphicsData","strokeFill","strokeAlpha","LineCap","0","LINE_CAP","BUTT","1","ROUND","2","SQUARE","LineJoin","LINE_JOIN","MITER","BEVEL","CreatejsGraphics","beginFill","moveTo","clone","endFill","containsPoint","beginHole","endHole","mt","lineTo","lt","arcTo","x1","y1","x2","y2","radius","at","arc","startAngle","endAngle","anticlockwise","a","quadraticCurveTo","cpx","cpy","qt","curveTo","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","bt","w","h","drawRect","r","dr","closePath","cp","clear","c","_parseColor","color","charAt","parseInt","colors","replace","split","Number","ef","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","lineTextureStyle","width","cap","join","ss","beginStroke","s","drawRoundRect","drawRoundedRect","rr","drawCircle","dc","drawEllipse","de","drawPolyStar","sides","pointSize","angle","drawRegularPolygon","dp","PixiText","Text","PixiTextContainer","text","_text","createCreatejsTextParams","font","textAlign","lineHeight","lineWidth","createPixiTextData","CreatejsText","_font","_parseFont","t","fontWeight","fontSize","fontFamily","fill","wordWrap","call","_align","p","shift","indexOf","style","align","height","wordWrapWidth","PixiColorMatrixFilter","ColorMatrixFilter","createPixiColorMatrixFilterData","createCreatejsColorFilterParams","redMultiplier","greenMultiplier","blueMultiplier","alphaMultiplier","redOffset","greenOffset","blueOffset","alphaOffset","CreatejsColorFilter","pixiData","createjsParams","enumerable","get","set","matrix","_createjsData","id","targets","handleTick","min","_addCreatejs","gotoAndPlay","addCreatejs","addCreatejsAt","removeCreatejs","_Container","PA.CreatejsStage","PA.CreatejsStageGL","PA.CreatejsMovieClip","PA.CreatejsSprite","PA.CreatejsShape","PA.CreatejsBitmap","PA.CreatejsGraphics","PA.CreatejsText","PA.CreatejsButtonHelper","PA.CreatejsColorFilter","MotionGuidePlugin","install"],"mappings":"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"}